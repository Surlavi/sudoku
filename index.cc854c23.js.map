{"mappings":"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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-c2fa80e1d6d002b8.js","build/src/main.js","src/main.ts","wasm/pkg/sudoku_wasm.js","node_modules/@parcel/runtime-js/lib/runtime-503292a6c0a3d230.js","build/src/theme.js","src/theme.ts","build/src/types.js","src/types.ts","build/src/game_controller.js","src/game_controller.ts","build/src/board_ui.js","src/board_ui.ts","build/src/game.js","src/game.ts","build/src/resolve.js","src/resolve.ts"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"27Lyk\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", () => $18c11f3350a906ea$export$6503ec6e8aabbaf, (v) => $18c11f3350a906ea$export$6503ec6e8aabbaf = v);\nvar $18c11f3350a906ea$export$6503ec6e8aabbaf;\nvar $18c11f3350a906ea$export$f7ad0328861e2f03;\n\"use strict\";\nvar $18c11f3350a906ea$var$mapping = new Map();\nfunction $18c11f3350a906ea$var$register(baseUrl, manifest) {\n    for(var i = 0; i < manifest.length - 1; i += 2)$18c11f3350a906ea$var$mapping.set(manifest[i], {\n        baseUrl: baseUrl,\n        path: manifest[i + 1]\n    });\n}\nfunction $18c11f3350a906ea$var$resolve(id) {\n    var resolved = $18c11f3350a906ea$var$mapping.get(id);\n    if (resolved == null) throw new Error('Could not resolve bundle with id ' + id);\n    return new URL(resolved.path, resolved.baseUrl).toString();\n}\n$18c11f3350a906ea$export$6503ec6e8aabbaf = $18c11f3350a906ea$var$register;\n$18c11f3350a906ea$export$f7ad0328861e2f03 = $18c11f3350a906ea$var$resolve;\n\n});\n\nvar $cd27bad30c1f38b4$exports = {};\n\n(parcelRequire(\"27Lyk\")).register(new URL(\"\", import.meta.url).toString(), JSON.parse(\"[\\\"f7twW\\\",\\\"index.cc854c23.js\\\",\\\"8uHta\\\",\\\"sudoku_wasm_bg.970e23ea.wasm\\\"]\"));\n\nlet $fb6cc04260f9a749$var$wasm;\nfunction $fb6cc04260f9a749$var$addToExternrefTable0(obj) {\n    const idx = $fb6cc04260f9a749$var$wasm.__externref_table_alloc();\n    $fb6cc04260f9a749$var$wasm.__wbindgen_export_2.set(idx, obj);\n    return idx;\n}\nfunction $fb6cc04260f9a749$var$handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        const idx = $fb6cc04260f9a749$var$addToExternrefTable0(e);\n        $fb6cc04260f9a749$var$wasm.__wbindgen_exn_store(idx);\n    }\n}\nconst $fb6cc04260f9a749$var$cachedTextDecoder = typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-8', {\n    ignoreBOM: true,\n    fatal: true\n}) : {\n    decode: ()=>{\n        throw Error('TextDecoder not available');\n    }\n};\nif (typeof TextDecoder !== 'undefined') $fb6cc04260f9a749$var$cachedTextDecoder.decode();\nlet $fb6cc04260f9a749$var$cachedUint8ArrayMemory0 = null;\nfunction $fb6cc04260f9a749$var$getUint8ArrayMemory0() {\n    if ($fb6cc04260f9a749$var$cachedUint8ArrayMemory0 === null || $fb6cc04260f9a749$var$cachedUint8ArrayMemory0.byteLength === 0) $fb6cc04260f9a749$var$cachedUint8ArrayMemory0 = new Uint8Array($fb6cc04260f9a749$var$wasm.memory.buffer);\n    return $fb6cc04260f9a749$var$cachedUint8ArrayMemory0;\n}\nfunction $fb6cc04260f9a749$var$getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return $fb6cc04260f9a749$var$cachedTextDecoder.decode($fb6cc04260f9a749$var$getUint8ArrayMemory0().subarray(ptr, ptr + len));\n}\nlet $fb6cc04260f9a749$var$WASM_VECTOR_LEN = 0;\nconst $fb6cc04260f9a749$var$cachedTextEncoder = typeof TextEncoder !== 'undefined' ? new TextEncoder('utf-8') : {\n    encode: ()=>{\n        throw Error('TextEncoder not available');\n    }\n};\nconst $fb6cc04260f9a749$var$encodeString = typeof $fb6cc04260f9a749$var$cachedTextEncoder.encodeInto === 'function' ? function(arg, view) {\n    return $fb6cc04260f9a749$var$cachedTextEncoder.encodeInto(arg, view);\n} : function(arg, view) {\n    const buf = $fb6cc04260f9a749$var$cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n};\nfunction $fb6cc04260f9a749$var$passStringToWasm0(arg, malloc, realloc) {\n    if (realloc === undefined) {\n        const buf = $fb6cc04260f9a749$var$cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        $fb6cc04260f9a749$var$getUint8ArrayMemory0().subarray(ptr, ptr + buf.length).set(buf);\n        $fb6cc04260f9a749$var$WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n    const mem = $fb6cc04260f9a749$var$getUint8ArrayMemory0();\n    let offset = 0;\n    for(; offset < len; offset++){\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n    if (offset !== len) {\n        if (offset !== 0) arg = arg.slice(offset);\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = $fb6cc04260f9a749$var$getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\n        const ret = $fb6cc04260f9a749$var$encodeString(arg, view);\n        offset += ret.written;\n        ptr = realloc(ptr, len, offset, 1) >>> 0;\n    }\n    $fb6cc04260f9a749$var$WASM_VECTOR_LEN = offset;\n    return ptr;\n}\nlet $fb6cc04260f9a749$var$cachedDataViewMemory0 = null;\nfunction $fb6cc04260f9a749$var$getDataViewMemory0() {\n    if ($fb6cc04260f9a749$var$cachedDataViewMemory0 === null || $fb6cc04260f9a749$var$cachedDataViewMemory0.buffer.detached === true || $fb6cc04260f9a749$var$cachedDataViewMemory0.buffer.detached === undefined && $fb6cc04260f9a749$var$cachedDataViewMemory0.buffer !== $fb6cc04260f9a749$var$wasm.memory.buffer) $fb6cc04260f9a749$var$cachedDataViewMemory0 = new DataView($fb6cc04260f9a749$var$wasm.memory.buffer);\n    return $fb6cc04260f9a749$var$cachedDataViewMemory0;\n}\nfunction $fb6cc04260f9a749$var$isLikeNone(x) {\n    return x === undefined || x === null;\n}\nfunction $fb6cc04260f9a749$var$getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return $fb6cc04260f9a749$var$getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\nfunction $fb6cc04260f9a749$export$ede763ccc882b3e5() {\n    $fb6cc04260f9a749$var$wasm.init_panic_hook();\n}\nfunction $fb6cc04260f9a749$var$passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1, 1) >>> 0;\n    $fb6cc04260f9a749$var$getUint8ArrayMemory0().set(arg, ptr / 1);\n    $fb6cc04260f9a749$var$WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\nfunction $fb6cc04260f9a749$var$takeFromExternrefTable0(idx) {\n    const value = $fb6cc04260f9a749$var$wasm.__wbindgen_export_2.get(idx);\n    $fb6cc04260f9a749$var$wasm.__externref_table_dealloc(idx);\n    return value;\n}\nfunction $fb6cc04260f9a749$export$3317e00185b5980d(board) {\n    var ptr0 = $fb6cc04260f9a749$var$passArray8ToWasm0(board, $fb6cc04260f9a749$var$wasm.__wbindgen_malloc);\n    var len0 = $fb6cc04260f9a749$var$WASM_VECTOR_LEN;\n    const ret = $fb6cc04260f9a749$var$wasm.fast_resolve(ptr0, len0, board);\n    if (ret[2]) throw $fb6cc04260f9a749$var$takeFromExternrefTable0(ret[1]);\n    return ret[0] >>> 0;\n}\nfunction $fb6cc04260f9a749$export$80d376111cc09ad7(non_empty_cnt, output_puzzle) {\n    var ptr0 = $fb6cc04260f9a749$var$passArray8ToWasm0(output_puzzle, $fb6cc04260f9a749$var$wasm.__wbindgen_malloc);\n    var len0 = $fb6cc04260f9a749$var$WASM_VECTOR_LEN;\n    $fb6cc04260f9a749$var$wasm.generate(non_empty_cnt, ptr0, len0, output_puzzle);\n}\nasync function $fb6cc04260f9a749$var$__wbg_load(module1, imports) {\n    if (typeof Response === 'function' && module1 instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') try {\n            return await WebAssembly.instantiateStreaming(module1, imports);\n        } catch (e) {\n            if (module1.headers.get('Content-Type') != 'application/wasm') console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n            else throw e;\n        }\n        const bytes = await module1.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n    } else {\n        const instance = await WebAssembly.instantiate(module1, imports);\n        if (instance instanceof WebAssembly.Instance) return {\n            instance: instance,\n            module: module1\n        };\n        else return instance;\n    }\n}\nfunction $fb6cc04260f9a749$var$__wbg_get_imports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg_buffer_61b7ce01341d7f88 = function(arg0) {\n        const ret = arg0.buffer;\n        return ret;\n    };\n    imports.wbg.__wbg_call_500db948e69c7330 = function() {\n        return $fb6cc04260f9a749$var$handleError(function(arg0, arg1, arg2) {\n            const ret = arg0.call(arg1, arg2);\n            return ret;\n        }, arguments);\n    };\n    imports.wbg.__wbg_call_b0d8e36992d9900d = function() {\n        return $fb6cc04260f9a749$var$handleError(function(arg0, arg1) {\n            const ret = arg0.call(arg1);\n            return ret;\n        }, arguments);\n    };\n    imports.wbg.__wbg_crypto_ed58b8e10a292839 = function(arg0) {\n        const ret = arg0.crypto;\n        return ret;\n    };\n    imports.wbg.__wbg_error_7534b8e9a36f1ab4 = function(arg0, arg1) {\n        let deferred0_0;\n        let deferred0_1;\n        try {\n            deferred0_0 = arg0;\n            deferred0_1 = arg1;\n            console.error($fb6cc04260f9a749$var$getStringFromWasm0(arg0, arg1));\n        } finally{\n            $fb6cc04260f9a749$var$wasm.__wbindgen_free(deferred0_0, deferred0_1, 1);\n        }\n    };\n    imports.wbg.__wbg_getRandomValues_bcb4912f16000dc4 = function() {\n        return $fb6cc04260f9a749$var$handleError(function(arg0, arg1) {\n            arg0.getRandomValues(arg1);\n        }, arguments);\n    };\n    imports.wbg.__wbg_msCrypto_0a36e2ec3a343d26 = function(arg0) {\n        const ret = arg0.msCrypto;\n        return ret;\n    };\n    imports.wbg.__wbg_new_3ff5b33b1ce712df = function(arg0) {\n        const ret = new Uint8Array(arg0);\n        return ret;\n    };\n    imports.wbg.__wbg_new_8a6f238a6ece86ea = function() {\n        const ret = new Error();\n        return ret;\n    };\n    imports.wbg.__wbg_newnoargs_fd9e4bf8be2bc16d = function(arg0, arg1) {\n        const ret = new Function($fb6cc04260f9a749$var$getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbg_newwithbyteoffsetandlength_ba35896968751d91 = function(arg0, arg1, arg2) {\n        const ret = new Uint8Array(arg0, arg1 >>> 0, arg2 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_newwithlength_34ce8f1051e74449 = function(arg0) {\n        const ret = new Uint8Array(arg0 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_node_02999533c4ea02e3 = function(arg0) {\n        const ret = arg0.node;\n        return ret;\n    };\n    imports.wbg.__wbg_now_2c95c9de01293173 = function(arg0) {\n        const ret = arg0.now();\n        return ret;\n    };\n    imports.wbg.__wbg_performance_7a3ffd0b17f663ad = function(arg0) {\n        const ret = arg0.performance;\n        return ret;\n    };\n    imports.wbg.__wbg_process_5c1d670bc53614b8 = function(arg0) {\n        const ret = arg0.process;\n        return ret;\n    };\n    imports.wbg.__wbg_randomFillSync_ab2cfe79ebbf2740 = function() {\n        return $fb6cc04260f9a749$var$handleError(function(arg0, arg1) {\n            arg0.randomFillSync(arg1);\n        }, arguments);\n    };\n    imports.wbg.__wbg_require_79b1e9274cde3c87 = function() {\n        return $fb6cc04260f9a749$var$handleError(function() {\n            const ret = module.require;\n            return ret;\n        }, arguments);\n    };\n    imports.wbg.__wbg_set_23d69db4e5c66a6e = function(arg0, arg1, arg2) {\n        arg0.set(arg1, arg2 >>> 0);\n    };\n    imports.wbg.__wbg_stack_0ed75d68575b0f3c = function(arg0, arg1) {\n        const ret = arg1.stack;\n        const ptr1 = $fb6cc04260f9a749$var$passStringToWasm0(ret, $fb6cc04260f9a749$var$wasm.__wbindgen_malloc, $fb6cc04260f9a749$var$wasm.__wbindgen_realloc);\n        const len1 = $fb6cc04260f9a749$var$WASM_VECTOR_LEN;\n        $fb6cc04260f9a749$var$getDataViewMemory0().setInt32(arg0 + 4, len1, true);\n        $fb6cc04260f9a749$var$getDataViewMemory0().setInt32(arg0 + 0, ptr1, true);\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_0be7472e492ad3e3 = function() {\n        const ret = typeof $parcel$global === 'undefined' ? null : $parcel$global;\n        return $fb6cc04260f9a749$var$isLikeNone(ret) ? 0 : $fb6cc04260f9a749$var$addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_THIS_1a6eb482d12c9bfb = function() {\n        const ret = typeof globalThis === 'undefined' ? null : globalThis;\n        return $fb6cc04260f9a749$var$isLikeNone(ret) ? 0 : $fb6cc04260f9a749$var$addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_SELF_1dc398a895c82351 = function() {\n        const ret = typeof self === 'undefined' ? null : self;\n        return $fb6cc04260f9a749$var$isLikeNone(ret) ? 0 : $fb6cc04260f9a749$var$addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_WINDOW_ae1c80c7eea8d64a = function() {\n        const ret = typeof window === 'undefined' ? null : window;\n        return $fb6cc04260f9a749$var$isLikeNone(ret) ? 0 : $fb6cc04260f9a749$var$addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_subarray_46adeb9b86949d12 = function(arg0, arg1, arg2) {\n        const ret = arg0.subarray(arg1 >>> 0, arg2 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_versions_c71aa1626a93e0a1 = function(arg0) {\n        const ret = arg0.versions;\n        return ret;\n    };\n    imports.wbg.__wbindgen_copy_to_typed_array = function(arg0, arg1, arg2) {\n        new Uint8Array(arg2.buffer, arg2.byteOffset, arg2.byteLength).set($fb6cc04260f9a749$var$getArrayU8FromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbindgen_error_new = function(arg0, arg1) {\n        const ret = new Error($fb6cc04260f9a749$var$getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbindgen_init_externref_table = function() {\n        const table = $fb6cc04260f9a749$var$wasm.__wbindgen_export_2;\n        const offset = table.grow(4);\n        table.set(0, undefined);\n        table.set(offset + 0, undefined);\n        table.set(offset + 1, null);\n        table.set(offset + 2, true);\n        table.set(offset + 3, false);\n    };\n    imports.wbg.__wbindgen_is_function = function(arg0) {\n        const ret = typeof arg0 === 'function';\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_object = function(arg0) {\n        const val = arg0;\n        const ret = typeof val === 'object' && val !== null;\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_string = function(arg0) {\n        const ret = typeof arg0 === 'string';\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_undefined = function(arg0) {\n        const ret = arg0 === undefined;\n        return ret;\n    };\n    imports.wbg.__wbindgen_memory = function() {\n        const ret = $fb6cc04260f9a749$var$wasm.memory;\n        return ret;\n    };\n    imports.wbg.__wbindgen_string_new = function(arg0, arg1) {\n        const ret = $fb6cc04260f9a749$var$getStringFromWasm0(arg0, arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error($fb6cc04260f9a749$var$getStringFromWasm0(arg0, arg1));\n    };\n    return imports;\n}\nfunction $fb6cc04260f9a749$var$__wbg_init_memory(imports, memory) {}\nfunction $fb6cc04260f9a749$var$__wbg_finalize_init(instance, module1) {\n    $fb6cc04260f9a749$var$wasm = instance.exports;\n    $fb6cc04260f9a749$var$__wbg_init.__wbindgen_wasm_module = module1;\n    $fb6cc04260f9a749$var$cachedDataViewMemory0 = null;\n    $fb6cc04260f9a749$var$cachedUint8ArrayMemory0 = null;\n    $fb6cc04260f9a749$var$wasm.__wbindgen_start();\n    return $fb6cc04260f9a749$var$wasm;\n}\nfunction $fb6cc04260f9a749$export$2ec80ee76a9348bf(module1) {\n    if ($fb6cc04260f9a749$var$wasm !== undefined) return $fb6cc04260f9a749$var$wasm;\n    if (typeof module1 !== 'undefined') {\n        if (Object.getPrototypeOf(module1) === Object.prototype) ({ module: module1 } = module1);\n        else console.warn('using deprecated parameters for `initSync()`; pass a single object instead');\n    }\n    const imports = $fb6cc04260f9a749$var$__wbg_get_imports();\n    $fb6cc04260f9a749$var$__wbg_init_memory(imports);\n    if (!(module1 instanceof WebAssembly.Module)) module1 = new WebAssembly.Module(module1);\n    const instance = new WebAssembly.Instance(module1, imports);\n    return $fb6cc04260f9a749$var$__wbg_finalize_init(instance, module1);\n}\nvar $9098339d50778e43$exports = {};\n$9098339d50778e43$exports = new URL(\"sudoku_wasm_bg.970e23ea.wasm\", import.meta.url).toString();\n\n\nasync function $fb6cc04260f9a749$var$__wbg_init(module_or_path) {\n    if ($fb6cc04260f9a749$var$wasm !== undefined) return $fb6cc04260f9a749$var$wasm;\n    if (typeof module_or_path !== 'undefined') {\n        if (Object.getPrototypeOf(module_or_path) === Object.prototype) ({ module_or_path: module_or_path } = module_or_path);\n        else console.warn('using deprecated parameters for the initialization function; pass a single object instead');\n    }\n    if (typeof module_or_path === 'undefined') module_or_path = new URL($9098339d50778e43$exports);\n    const imports = $fb6cc04260f9a749$var$__wbg_get_imports();\n    if (typeof module_or_path === 'string' || typeof Request === 'function' && module_or_path instanceof Request || typeof URL === 'function' && module_or_path instanceof URL) module_or_path = fetch(module_or_path);\n    $fb6cc04260f9a749$var$__wbg_init_memory(imports);\n    const { instance: instance, module: module1 } = await $fb6cc04260f9a749$var$__wbg_load(await module_or_path, imports);\n    return $fb6cc04260f9a749$var$__wbg_finalize_init(instance, module1);\n}\nvar $fb6cc04260f9a749$export$2e2bcd8739ae039 = $fb6cc04260f9a749$var$__wbg_init;\n\n\nconst $f360512a3c30bea8$var$DEFAULT_THEME = {\n    color_prefilled: '#050505',\n    color_resolved: '#156363',\n    color_draft: '#447862',\n    color_highlight_foreground: '#007896',\n    color_highlight_bg1: $f360512a3c30bea8$var$rgba('#dcc1c3', 1),\n    color_highlight_bg2: $f360512a3c30bea8$var$rgba('#dcd1d1', 0.5),\n    color_background: '#fefefe'\n};\nfunction $f360512a3c30bea8$export$3bfd0d5209a8006a() {\n    return $f360512a3c30bea8$var$DEFAULT_THEME;\n}\nfunction $f360512a3c30bea8$var$rgba(hex, alpha) {\n    hex = hex.replace('#', '');\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\n\n\nconst $c02655ebd8daba6d$export$f620cea8bc0acc40 = 9;\nconst $c02655ebd8daba6d$export$7331fb0f7c654bd8 = $c02655ebd8daba6d$export$f620cea8bc0acc40 * $c02655ebd8daba6d$export$f620cea8bc0acc40;\nconst $c02655ebd8daba6d$var$CHAR_FOR_EMPTY_CELL = '.';\nfunction $c02655ebd8daba6d$var$assertIndexInRange(value, desc) {\n    if (!Number.isInteger(value) || value < 0 || value >= $c02655ebd8daba6d$export$f620cea8bc0acc40) throw new RangeError(`Invalid ${desc}: ${value}`);\n}\nfunction $c02655ebd8daba6d$var$assertCellValueInRange(value) {\n    if (!Number.isInteger(value) || value < 1 || value > $c02655ebd8daba6d$export$f620cea8bc0acc40) throw new RangeError(`Invalid cell value: ${value}`);\n}\nclass $c02655ebd8daba6d$var$CellValueSet {\n    bitmap;\n    constructor(initValue = false){\n        this.bitmap = new Array($c02655ebd8daba6d$export$f620cea8bc0acc40 + 1).fill(initValue);\n    }\n    add(value) {\n        this.bitmap[value] = true;\n        return this;\n    }\n    delete(value) {\n        const ret = this.bitmap[value];\n        this.bitmap[value] = false;\n        return ret;\n    }\n    has(value) {\n        return this.bitmap[value];\n    }\n    clear() {\n        this.bitmap.fill(false);\n    }\n    addAll() {\n        this.bitmap.fill(true);\n    }\n    hasAll() {\n        for(let i = 1; i <= $c02655ebd8daba6d$export$f620cea8bc0acc40; i++){\n            if (!this.bitmap[i]) return false;\n        }\n        return true;\n    }\n    getUnique() {\n        let ret = null;\n        for(let i = 1; i <= $c02655ebd8daba6d$export$f620cea8bc0acc40; i++){\n            if (!this.bitmap[i]) continue;\n            if (ret === null) ret = i;\n            else return null;\n        }\n        return ret;\n    }\n    toString() {\n        let ret = '';\n        for(let i = 1; i <= $c02655ebd8daba6d$export$f620cea8bc0acc40; i++)if (this.bitmap[i]) ret += `${i} `;\n        return ret + `: ${this.getUnique()}`;\n    }\n}\nclass $c02655ebd8daba6d$export$d6e0f5996cc55599 {\n    x;\n    y;\n    linearIndex;\n    squareIndex;\n    constructor(x, y){\n        $c02655ebd8daba6d$var$assertIndexInRange(x, 'x');\n        $c02655ebd8daba6d$var$assertIndexInRange(y, 'y');\n        this.x = x;\n        this.y = y;\n        this.linearIndex = x + y * $c02655ebd8daba6d$export$f620cea8bc0acc40;\n        this.squareIndex = Math.floor(x / 3) + Math.floor(y / 3) * 3;\n    }\n    static fromLinearIndex(i) {\n        return new $c02655ebd8daba6d$export$d6e0f5996cc55599(i % $c02655ebd8daba6d$export$f620cea8bc0acc40, Math.floor(i / $c02655ebd8daba6d$export$f620cea8bc0acc40));\n    }\n    toString() {\n        return `(x: ${this.x}, y: ${this.y}, square: ${this.squareIndex})`;\n    }\n}\nclass $c02655ebd8daba6d$export$f6f0c3fe4ec306ea {\n    coordinate;\n    value;\n    constructor(coordinate, value){\n        if (value !== null) $c02655ebd8daba6d$var$assertCellValueInRange(value);\n        this.coordinate = coordinate;\n        this.value = value;\n    }\n    toChar() {\n        return this.value === null ? $c02655ebd8daba6d$var$CHAR_FOR_EMPTY_CELL : this.value.toString();\n    }\n    static fromChar(coordinate, char) {\n        if (char === $c02655ebd8daba6d$var$CHAR_FOR_EMPTY_CELL) return new $c02655ebd8daba6d$export$f6f0c3fe4ec306ea(coordinate, null);\n        return new $c02655ebd8daba6d$export$f6f0c3fe4ec306ea(coordinate, parseInt(char));\n    }\n}\nfunction $c02655ebd8daba6d$export$ca6ef7ad567c0803(cells) {\n    return cells.map((cell)=>cell.toChar()).join('');\n}\nfunction $c02655ebd8daba6d$export$da037351fcfc0321(cells, strict = false) {\n    if (cells.length !== $c02655ebd8daba6d$export$f620cea8bc0acc40) throw new Error(`Got cell size ${cells.length}, want ${$c02655ebd8daba6d$export$f620cea8bc0acc40}`);\n    const values = new $c02655ebd8daba6d$var$CellValueSet();\n    for (const cell of cells){\n        if (cell.value === null) continue;\n        if (values.has(cell.value)) return false;\n    }\n    return !strict || values.hasAll();\n}\nvar $c02655ebd8daba6d$export$356a9607d9b9ba07;\n(function(ResolvingCellState) {\n    ResolvingCellState[\"PREFILLED\"] = \"Prefilled\";\n    ResolvingCellState[\"RESOLVING\"] = \"Resolving\";\n    ResolvingCellState[\"RESOLVED\"] = \"Resolved\";\n})($c02655ebd8daba6d$export$356a9607d9b9ba07 || ($c02655ebd8daba6d$export$356a9607d9b9ba07 = {}));\nclass $c02655ebd8daba6d$export$6a0cc0ca4c9c7066 extends $c02655ebd8daba6d$export$f6f0c3fe4ec306ea {\n    state;\n    draftNumbers;\n    static newPrefilled(coordinate, value) {\n        return new $c02655ebd8daba6d$export$6a0cc0ca4c9c7066(coordinate, $c02655ebd8daba6d$export$356a9607d9b9ba07.PREFILLED, value);\n    }\n    static newResolving(coordinate) {\n        return new $c02655ebd8daba6d$export$6a0cc0ca4c9c7066(coordinate, $c02655ebd8daba6d$export$356a9607d9b9ba07.RESOLVING, null);\n    }\n    constructor(coordinate, state, value){\n        super(coordinate, value);\n        this.state = state;\n        this.draftNumbers = new $c02655ebd8daba6d$var$CellValueSet(false);\n    }\n    hasNumber() {\n        switch(this.state){\n            case $c02655ebd8daba6d$export$356a9607d9b9ba07.PREFILLED:\n            case $c02655ebd8daba6d$export$356a9607d9b9ba07.RESOLVED:\n                return true;\n            case $c02655ebd8daba6d$export$356a9607d9b9ba07.RESOLVING:\n                return false;\n        }\n    }\n    addAllDraftNumber() {\n        for(let i = 1; i <= $c02655ebd8daba6d$export$f620cea8bc0acc40; i++)this.draftNumbers.add(i);\n    }\n    hasDraftNumber(value) {\n        return this.draftNumbers.has(value);\n    }\n    addDraftNumber(value) {\n        this.draftNumbers.add(value);\n    }\n    removeDraftNumber(value) {\n        this.draftNumbers.delete(value);\n    }\n    fillNumber(value) {\n        $c02655ebd8daba6d$var$assertCellValueInRange(value);\n        this.value = value;\n        this.draftNumbers.clear();\n        this.state = $c02655ebd8daba6d$export$356a9607d9b9ba07.RESOLVED;\n    }\n    toString() {\n        return `${this.coordinate} state: ${this.state}, possibleValues: ${this.draftNumbers}`;\n    }\n}\nclass $c02655ebd8daba6d$export$3ca9368aae595c1d {\n    cells;\n    constructor(cells){\n        for(let i = 0; i < $c02655ebd8daba6d$export$7331fb0f7c654bd8; i++){\n            if (cells[i].coordinate.linearIndex !== i) throw new Error(`Invalid cell ${cells[i]}`);\n        }\n        this.cells = cells;\n    }\n    static createBoardFromString(chars) {\n        // Drop all empty chars.\n        chars = chars.replace(/\\s/g, '');\n        if (chars.length !== $c02655ebd8daba6d$export$7331fb0f7c654bd8) throw new Error(`Input char length ${chars.length}, want ${$c02655ebd8daba6d$export$7331fb0f7c654bd8}`);\n        const cells = new Array();\n        for(let i = 0; i < $c02655ebd8daba6d$export$7331fb0f7c654bd8; i++)cells.push($c02655ebd8daba6d$export$f6f0c3fe4ec306ea.fromChar($c02655ebd8daba6d$export$d6e0f5996cc55599.fromLinearIndex(i), chars[i]));\n        return new $c02655ebd8daba6d$export$3ca9368aae595c1d(cells);\n    }\n    printBoard() {\n        let ret = '';\n        for(let i = 0; i < $c02655ebd8daba6d$export$7331fb0f7c654bd8; i++){\n            ret += this.cells[i].toChar();\n            if (i % $c02655ebd8daba6d$export$f620cea8bc0acc40 === $c02655ebd8daba6d$export$f620cea8bc0acc40 - 1) ret += '\\n';\n        }\n        return ret;\n    }\n    getCellByCoord(coord) {\n        return this.cells[coord.linearIndex];\n    }\n    getCellsByRow(rowIndex) {\n        $c02655ebd8daba6d$var$assertIndexInRange(rowIndex, 'rowIndex');\n        const ret = new Array();\n        for(let i = 0; i < $c02655ebd8daba6d$export$f620cea8bc0acc40; i++)ret.push(this.cells[rowIndex * $c02655ebd8daba6d$export$f620cea8bc0acc40 + i]);\n        return ret;\n    }\n    getCellsByColumn(columnIndex) {\n        $c02655ebd8daba6d$var$assertIndexInRange(columnIndex, 'columnIndex');\n        const ret = new Array();\n        for(let i = 0; i < $c02655ebd8daba6d$export$f620cea8bc0acc40; i++)ret.push(this.cells[i * $c02655ebd8daba6d$export$f620cea8bc0acc40 + columnIndex]);\n        return ret;\n    }\n    getCellsBySquare(squareIndex) {\n        $c02655ebd8daba6d$var$assertIndexInRange(squareIndex, 'squareIndex');\n        return this.cells.filter((cell)=>cell.coordinate.squareIndex === squareIndex);\n    }\n    getCellsByNeighborToCoord(coord) {\n        return $c02655ebd8daba6d$export$2b07a0b5dadde1bc([\n            this.getCellsByColumn(coord.x),\n            this.getCellsByRow(coord.y),\n            this.getCellsBySquare(coord.squareIndex)\n        ]);\n    }\n    validate(strict) {\n        for(let i = 0; i < $c02655ebd8daba6d$export$f620cea8bc0acc40; i++){\n            if (!$c02655ebd8daba6d$export$da037351fcfc0321(this.getCellsByRow(i), strict)) return false;\n            if (!$c02655ebd8daba6d$export$da037351fcfc0321(this.getCellsByColumn(i), strict)) return false;\n            if (!$c02655ebd8daba6d$export$da037351fcfc0321(this.getCellsBySquare(i), strict)) return false;\n        }\n        return true;\n    }\n}\nfunction $c02655ebd8daba6d$export$2b07a0b5dadde1bc(arrays) {\n    const seen = new Set();\n    const merged = [];\n    for (const arr of arrays){\n        if (arr) for (const cell of arr){\n            if (cell) {\n                if (!seen.has(cell)) {\n                    seen.add(cell);\n                    merged.push(cell);\n                }\n            }\n        }\n    }\n    return merged;\n}\n\n\n\n\nfunction $264de1acac9b7e95$var$drawLine(ctx, x1, y1, x2, y2, style) {\n    ctx.strokeStyle = style.color;\n    ctx.lineWidth = style.width ? style.width : 1;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n}\nfunction $264de1acac9b7e95$var$getCanvas2DContext(canvas) {\n    return canvas.getContext('2d');\n}\nfunction $264de1acac9b7e95$var$clearCanvas(canvas) {\n    const ctx = $264de1acac9b7e95$var$getCanvas2DContext(canvas);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n}\nvar $264de1acac9b7e95$export$cc1a246adca07dd4;\n(function(MoveDirection) {\n    MoveDirection[MoveDirection[\"UP\"] = 0] = \"UP\";\n    MoveDirection[MoveDirection[\"DOWN\"] = 1] = \"DOWN\";\n    MoveDirection[MoveDirection[\"RIGHT\"] = 2] = \"RIGHT\";\n    MoveDirection[MoveDirection[\"LEFT\"] = 3] = \"LEFT\";\n})($264de1acac9b7e95$export$cc1a246adca07dd4 || ($264de1acac9b7e95$export$cc1a246adca07dd4 = {}));\nconst $264de1acac9b7e95$var$CANVAS_MARGIN = 5;\nconst $264de1acac9b7e95$var$VIRTUAL_KB_HTML = `\n<div>\n  <label class=\"switch\">\n    <input type=\"checkbox\" id=\"kb-draft-mode-switch\" checked=\"true\">\n    <span class=\"slider\"></span>\n  </label>\n  <span>Draft mode</span>\n</div>\n<div div class=\"keyboard\" id=\"keyboard\"></div>\n`;\nclass $264de1acac9b7e95$var$VirtualKeyboard {\n    cb;\n    container;\n    width;\n    height;\n    constructor(container, keyInputCallback){\n        this.container = container;\n        container.setHTMLUnsafe($264de1acac9b7e95$var$VIRTUAL_KB_HTML);\n        this.cb = keyInputCallback;\n        const keyboard = document.getElementById('keyboard');\n        const keyboardDraftModeSwitch = document.getElementById('kb-draft-mode-switch');\n        for(let i = 1; i <= 9; i++){\n            const key = document.createElement('div');\n            key.classList.add('key');\n            key.textContent = `${i}`;\n            key.addEventListener('click', (ev)=>{\n                ev.preventDefault();\n                this.cb(i, keyboardDraftModeSwitch.checked);\n            });\n            keyboard.appendChild(key);\n        }\n        this.width = this.container.clientWidth;\n        this.height = this.container.clientHeight;\n        this.hide();\n    }\n    show(boardUi, coord) {\n        const w = this.width;\n        const h = this.height;\n        const x1 = boardUi.getCanvasPosForIdx(coord.x);\n        const x2 = boardUi.getCanvasPosForIdx(coord.x + 1);\n        const y1 = boardUi.getCanvasPosForIdx(coord.y);\n        const MARGIN = 3;\n        const x = x1 - w - MARGIN > 0 ? x1 - w - MARGIN : x2 + MARGIN;\n        const y = y1 + h < boardUi.config.size ? y1 + 40 : boardUi.config.size - h;\n        this.container.style.left = `${x}px`;\n        this.container.style.top = `${y}px`;\n        this.container.style.display = 'block';\n        console.log('display virtual keyboard at (%d, %d)', x, y);\n    }\n    hide(animation = false) {\n        console.log('hide virtual keyboard');\n        this.container.style.display = 'none';\n    }\n}\nclass $264de1acac9b7e95$export$a2ef264ccbaba224 {\n    config;\n    container;\n    gameBoard;\n    virtualKeyboard;\n    gridCanvas;\n    neighHighlightCanvas;\n    numberHighlightCanvas;\n    // The canvas layer for displaying numbers.\n    numbersCanvas;\n    // The canvas layer for displaying cursor.\n    cursorCanvas;\n    // The canvas layer for handling mouse event.\n    clickCanvas;\n    cursorCoord = null;\n    focusedNumber = null;\n    constructor(container, gameBoard, virtualKeyboardContainer, digitInputCallback, config){\n        this.container = container;\n        this.gameBoard = gameBoard;\n        this.virtualKeyboard = new $264de1acac9b7e95$var$VirtualKeyboard(virtualKeyboardContainer, (v, b)=>{\n            // Do not hide in draft mode.\n            if (!b) this.virtualKeyboard.hide();\n            digitInputCallback(v, b);\n        });\n        this.updateConfig(config);\n    }\n    getTheme() {\n        return $f360512a3c30bea8$export$3bfd0d5209a8006a();\n    }\n    getCellSize() {\n        return (this.config.size - $264de1acac9b7e95$var$CANVAS_MARGIN * 2) / 9;\n    }\n    getCanvasPosForIdx(index) {\n        return $264de1acac9b7e95$var$CANVAS_MARGIN + this.getCellSize() * index;\n    }\n    getIdxForCanvasPos(pos) {\n        for(let i = 0; i < 9; ++i){\n            if (pos < this.getCanvasPosForIdx(i + 1) && pos > this.getCanvasPosForIdx(i)) return i;\n        }\n        return null;\n    }\n    updateBoard() {\n        this.redrawNumbers();\n        this.redrawHighlight();\n    }\n    updateConfig(config) {\n        this.config = config;\n        // Remove all children at first.\n        while(this.container.firstChild)this.container.removeChild(this.container.firstChild);\n        this.numberHighlightCanvas = this.createCanvas(1);\n        this.neighHighlightCanvas = this.createCanvas(2);\n        this.gridCanvas = this.createCanvas(3);\n        this.numbersCanvas = this.createCanvas(4);\n        this.cursorCanvas = this.createCanvas(5);\n        this.clickCanvas = this.createCanvas(6);\n        this.redrawGrid();\n        this.redrawNumbers();\n        this.clickCanvas.addEventListener('click', (ev)=>{\n            this.virtualKeyboard.hide();\n            const rect = this.clickCanvas.getBoundingClientRect();\n            const x = this.getIdxForCanvasPos(ev.clientX - rect.left);\n            const y = this.getIdxForCanvasPos(ev.clientY - rect.top);\n            // Reset cursor if the click is out of bound.\n            if (x === null || y === null) this.updateCursor(null);\n            else {\n                const coord = new (0, $c02655ebd8daba6d$export$d6e0f5996cc55599)(x, y);\n                this.updateCursor(coord);\n                // If the cell is empty, show keyboard.\n                if (this.gameBoard.getCellByCoord(coord).value === null) this.virtualKeyboard.show(this, coord);\n            }\n        });\n        this.clickCanvas.addEventListener('dblclick', (ev)=>{\n            const rect = this.clickCanvas.getBoundingClientRect();\n            const x = this.getIdxForCanvasPos(ev.clientX - rect.left);\n            const y = this.getIdxForCanvasPos(ev.clientY - rect.top);\n            // Reset cursor if the click is out of bound.\n            if (x === null || y === null) this.updateFocusedNumber(null);\n            else {\n                const cell = this.gameBoard.getCellByCoord(new (0, $c02655ebd8daba6d$export$d6e0f5996cc55599)(x, y));\n                // Allow double click to cancel selection.\n                this.updateFocusedNumber(cell.value === this.focusedNumber ? null : cell.value);\n            }\n        });\n    }\n    updateCursor(coord) {\n        console.log('Set cursor to %s', coord);\n        // TODO: If the pos did not change, we can skip the following logic.\n        this.cursorCoord = coord;\n        this.redrawCursor();\n        this.redrawHighlight();\n    }\n    moveCursor(d) {\n        if (!this.cursorCoord) return;\n        let x = this.cursorCoord.x;\n        let y = this.cursorCoord.y;\n        switch(d){\n            case $264de1acac9b7e95$export$cc1a246adca07dd4.UP:\n                y -= 1;\n                break;\n            case $264de1acac9b7e95$export$cc1a246adca07dd4.DOWN:\n                y += 1;\n                break;\n            case $264de1acac9b7e95$export$cc1a246adca07dd4.LEFT:\n                x -= 1;\n                break;\n            case $264de1acac9b7e95$export$cc1a246adca07dd4.RIGHT:\n                x += 1;\n                break;\n        }\n        if (x < 9 && x >= 0 && y < 9 && y >= 0) this.updateCursor(new (0, $c02655ebd8daba6d$export$d6e0f5996cc55599)(x, y));\n    }\n    updateFocusedNumber(value) {\n        this.focusedNumber = value;\n        this.redrawHighlight();\n        this.redrawNumbers();\n    }\n    createCanvas(zIndex) {\n        const canvas = document.createElement('canvas');\n        canvas.width = this.config.size;\n        canvas.height = this.config.size;\n        canvas.style.position = 'absolute';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        canvas.style.zIndex = `${zIndex}`;\n        this.container.appendChild(canvas);\n        return canvas;\n    }\n    redrawHighlight() {\n        $264de1acac9b7e95$var$clearCanvas(this.neighHighlightCanvas);\n        $264de1acac9b7e95$var$clearCanvas(this.numberHighlightCanvas);\n        const highlightCell = (ctx, coord, color)=>{\n            const x = this.getCanvasPosForIdx(coord.x);\n            const y = this.getCanvasPosForIdx(coord.y);\n            ctx.fillStyle = color;\n            ctx.fillRect(x, y, this.getCellSize(), this.getCellSize());\n        };\n        const highlightDraftCell = (ctx, coord, value, color)=>{\n            const boxSize = this.getCellSize() / 3;\n            const x = this.getCanvasPosForIdx(coord.x) + Math.floor((value - 1) % 3) * boxSize;\n            const y = this.getCanvasPosForIdx(coord.y) + Math.floor((value - 1) / 3) * boxSize;\n            ctx.fillStyle = color;\n            ctx.fillRect(x, y, boxSize, boxSize);\n        };\n        const cursor = this.cursorCoord;\n        if (cursor && this.config.highlightCursorNeighbors) {\n            const ctx = $264de1acac9b7e95$var$getCanvas2DContext(this.neighHighlightCanvas);\n            const cells = this.gameBoard.getCellsByNeighborToCoord(cursor);\n            for (const cell of cells)highlightCell(ctx, cell.coordinate, this.getTheme().color_highlight_bg1);\n        }\n        if (this.focusedNumber !== null && (this.config.highlightNumberNeighbors || this.config.highlightNumber)) {\n            const ctx = $264de1acac9b7e95$var$getCanvas2DContext(this.numberHighlightCanvas);\n            const numberCells = this.gameBoard.cells.filter((c)=>{\n                return c.value === this.focusedNumber;\n            });\n            let cells = numberCells.slice();\n            if (this.config.highlightNumberNeighbors) {\n                const cellArrays = numberCells.map((c)=>{\n                    return this.gameBoard.getCellsByNeighborToCoord(c.coordinate);\n                });\n                cells = (0, $c02655ebd8daba6d$export$2b07a0b5dadde1bc)(cellArrays);\n            }\n            for (const cell of cells)highlightCell(ctx, cell.coordinate, this.getTheme().color_highlight_bg2);\n            // Also highlight all draft values.\n            for (const cell of this.gameBoard.cells)if (cell.hasDraftNumber(this.focusedNumber)) highlightDraftCell(ctx, cell.coordinate, this.focusedNumber, this.getTheme().color_highlight_bg2);\n        }\n    }\n    redrawGrid() {\n        const ctx = this.gridCanvas.getContext('2d');\n        if (!ctx) {\n            console.error('Context not available');\n            return;\n        }\n        const startPos = this.getCanvasPosForIdx(0);\n        const endPos = this.getCanvasPosForIdx(9);\n        const style = {\n            color: this.getTheme().color_prefilled\n        };\n        const sqrBorderStyle = {\n            color: this.getTheme().color_prefilled,\n            width: 3\n        };\n        for(let i = 0; i <= 9; i++){\n            const pos = this.getCanvasPosForIdx(i);\n            $264de1acac9b7e95$var$drawLine(ctx, startPos, pos, endPos, pos, i % 3 ? style : sqrBorderStyle);\n            $264de1acac9b7e95$var$drawLine(ctx, pos, startPos, pos, endPos, i % 3 ? style : sqrBorderStyle);\n        }\n    }\n    redrawNumbers() {\n        if (!this.gameBoard) return;\n        const ctx = this.numbersCanvas.getContext('2d');\n        if (!ctx) {\n            console.error('Context not available');\n            return;\n        }\n        $264de1acac9b7e95$var$clearCanvas(this.numbersCanvas);\n        const drawNumber = (val, coord, small, color)=>{\n            const boxSize = this.getCellSize() / (small ? 3 : 1);\n            const fontSize = boxSize * 0.8;\n            let x = this.getCanvasPosForIdx(coord.x) + boxSize / 2;\n            let y = this.getCanvasPosForIdx(coord.y) + boxSize / 2 + fontSize * 0.07;\n            if (small) {\n                x += Math.floor((val - 1) % 3) * boxSize;\n                y += Math.floor((val - 1) / 3) * boxSize;\n            }\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.font = `${fontSize}px monospace`;\n            ctx.fillStyle = color;\n            ctx.fillText(val.toString(), x, y);\n        };\n        for (const cell of this.gameBoard.cells){\n            if (cell.state === (0, $c02655ebd8daba6d$export$356a9607d9b9ba07).PREFILLED) drawNumber(cell.value, cell.coordinate, false, this.getTheme().color_prefilled);\n            if (cell.state === (0, $c02655ebd8daba6d$export$356a9607d9b9ba07).RESOLVED) drawNumber(cell.value, cell.coordinate, false, this.getTheme().color_resolved);\n            if (cell.state === (0, $c02655ebd8daba6d$export$356a9607d9b9ba07).RESOLVING) {\n                for(let i = 1; i <= 9; ++i)if (cell.draftNumbers.has(i)) drawNumber(i, cell.coordinate, true, this.getTheme().color_draft);\n            }\n        }\n    }\n    redrawCursor() {\n        const ctx = $264de1acac9b7e95$var$getCanvas2DContext(this.cursorCanvas);\n        // Clear the current drawing at first.\n        $264de1acac9b7e95$var$clearCanvas(this.cursorCanvas);\n        const coord = this.cursorCoord;\n        if (coord === null) return;\n        // Redraw cursor box.\n        const x1 = this.getCanvasPosForIdx(coord.x);\n        const x2 = this.getCanvasPosForIdx(coord.x + 1);\n        const y1 = this.getCanvasPosForIdx(coord.y);\n        const y2 = this.getCanvasPosForIdx(coord.y + 1);\n        const style = {\n            color: this.getTheme().color_highlight_foreground,\n            width: 3\n        };\n        $264de1acac9b7e95$var$drawLine(ctx, x1, y1, x2, y1, style);\n        $264de1acac9b7e95$var$drawLine(ctx, x1, y2, x2, y2, style);\n        $264de1acac9b7e95$var$drawLine(ctx, x1, y1, x1, y2, style);\n        $264de1acac9b7e95$var$drawLine(ctx, x2, y1, x2, y2, style);\n    }\n}\n\n\nfunction $95f0dc4e46c5e870$var$secondsToHumanReadable(seconds) {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = Math.floor(seconds % 60);\n    const formattedMinutes = String(minutes).padStart(2, '0');\n    const formattedSeconds = String(remainingSeconds).padStart(2, '0');\n    return `${formattedMinutes}:${formattedSeconds}`;\n}\nfunction $95f0dc4e46c5e870$var$keyCodeToDirection(code) {\n    switch(code){\n        case 'ArrowUp':\n            return (0, $264de1acac9b7e95$export$cc1a246adca07dd4).UP;\n        case 'ArrowDown':\n            return (0, $264de1acac9b7e95$export$cc1a246adca07dd4).DOWN;\n        case 'ArrowLeft':\n            return (0, $264de1acac9b7e95$export$cc1a246adca07dd4).LEFT;\n        case 'ArrowRight':\n            return (0, $264de1acac9b7e95$export$cc1a246adca07dd4).RIGHT;\n        default:\n            throw new Error('Unreachable');\n    }\n}\nconst $95f0dc4e46c5e870$var$HTML_CONTENT = `\n<div id=\"board-banner\">\n  <span style=\"text-align: left;\">Timer:&nbsp;<span id=\"value-timer\">0:00</span>\n  </span><span style=\"text-align: center;\">Mistakes:&nbsp;<span id=\"value-mistakes\">0</span>&nbsp;\n  </span><span style=\"text-align: right;\">Remaining:&nbsp;<span id=\"value-remaining\">0</span>&nbsp;\n  </span>\n</div>\n<div id=\"board\" style=\"position: relative;\"></div>\n<div id=\"num-keyboard\">\n  <div>\n    <label class=\"switch\">\n      <input type=\"checkbox\" id=\"kb-draft-mode-switch\" checked=\"true\">\n      <span class=\"slider\"></span>\n    </label>\n    <span>Draft mode</span>\n  </div>\n  <div div class=\"keyboard\" id=\"keyboard\"></div>\n</div>`;\nclass $95f0dc4e46c5e870$export$f3f3f6c0124f08de {\n    game;\n    pageDom;\n    boardUi;\n    constructor(game, pageDom){\n        this.game = game;\n        this.pageDom = pageDom;\n        // Update internal html.\n        this.pageDom.setHTMLUnsafe($95f0dc4e46c5e870$var$HTML_CONTENT);\n        const boardDom = document.getElementById('board');\n        const keyboardDom = document.getElementById('num-keyboard');\n        this.boardUi = new (0, $264de1acac9b7e95$export$a2ef264ccbaba224)(boardDom, game.puzzleBoard, keyboardDom, this.handleVirtualKeyboardClickEvent.bind(this), {\n            size: boardDom.clientWidth,\n            highlightCursorNeighbors: true,\n            highlightNumber: true,\n            highlightNumberNeighbors: true\n        });\n        this.refreshBanner();\n    }\n    handleKeyDownEvent(ev) {\n        console.log(ev);\n        switch(ev.code){\n            case 'ArrowUp':\n            case 'ArrowDown':\n            case 'ArrowLeft':\n            case 'ArrowRight':\n                this.boardUi.moveCursor($95f0dc4e46c5e870$var$keyCodeToDirection(ev.code));\n                return true;\n            case 'Digit1':\n            case 'Digit2':\n            case 'Digit3':\n            case 'Digit4':\n            case 'Digit5':\n            case 'Digit6':\n            case 'Digit7':\n            case 'Digit8':\n            case 'Digit9':\n                this.handleDigitKeyEvent(ev);\n                return true;\n            case 'KeyD':\n                this.game.recalculateDraftNumbers();\n                this.boardUi.updateBoard();\n                return true;\n            default:\n                // Do nothing now.\n                return false;\n        }\n    }\n    handleDigitKeyEvent(ev) {\n        const value = parseInt(ev.code.charAt(5));\n        if (this.boardUi.cursorCoord !== null) this.handleVirtualKeyboardClickEvent(value, !ev.shiftKey);\n    }\n    handleVirtualKeyboardClickEvent(value, draftMode) {\n        if (this.boardUi.cursorCoord === null) return;\n        console.log('hit %d', value);\n        if (!draftMode) this.game.fillInNumber(this.boardUi.cursorCoord, value);\n        else this.game.toggleDraftNumber(this.boardUi.cursorCoord, value);\n        this.boardUi.updateBoard();\n        this.refreshBanner(true);\n    }\n    refreshBanner(once = false) {\n        const timerDom = document.getElementById('value-timer');\n        const mistakesDom = document.getElementById('value-mistakes');\n        const remainingDom = document.getElementById('value-remaining');\n        timerDom.textContent = `${$95f0dc4e46c5e870$var$secondsToHumanReadable(this.game.getElapsedSeconds())}`;\n        mistakesDom.textContent = `${this.game.mistakes}`;\n        remainingDom.textContent = `${this.game.getEmptyCellsCount()}`;\n        // TODO: Add stop condition.\n        if (!once) setTimeout(()=>{\n            this.refreshBanner();\n        }, 1000);\n    }\n}\n\n\n\nclass $6fc50a6f48fb4eb3$export$6e629d5b6a809bce extends $c02655ebd8daba6d$export$3ca9368aae595c1d {\n    static createFromBoard(board) {\n        const cells = new Array();\n        for (const cell of board.cells)if (cell.value === null) cells.push((0, $c02655ebd8daba6d$export$6a0cc0ca4c9c7066).newResolving(cell.coordinate));\n        else cells.push((0, $c02655ebd8daba6d$export$6a0cc0ca4c9c7066).newPrefilled(cell.coordinate, cell.value));\n        return new $6fc50a6f48fb4eb3$export$6e629d5b6a809bce(cells);\n    }\n    getEmptyCellsCount() {\n        return this.cells.filter((cell)=>cell.state === (0, $c02655ebd8daba6d$export$356a9607d9b9ba07).RESOLVING).length;\n    }\n    takeAction(action) {\n        console.log($6fc50a6f48fb4eb3$var$actionToString(action));\n        const cell = this.getCellByCoord(action.coordinate);\n        switch(action.type){\n            case $6fc50a6f48fb4eb3$var$ActionType.REMOVE_DRAFT_NUMBER:\n                // console.log(`before ${cell.possibleValues.toString()}`)\n                cell.removeDraftNumber(action.value);\n                break;\n            case $6fc50a6f48fb4eb3$var$ActionType.FILL_IN_NUMBER:\n                cell.fillNumber(action.value);\n                break;\n        }\n    }\n    takeActions(actions) {\n        for (const action of actions)this.takeAction(action);\n    }\n}\nvar $6fc50a6f48fb4eb3$var$ActionType;\n(function(ActionType) {\n    ActionType[\"REMOVE_DRAFT_NUMBER\"] = \"remove draft number\";\n    ActionType[\"FILL_IN_NUMBER\"] = \"fill in number\";\n})($6fc50a6f48fb4eb3$var$ActionType || ($6fc50a6f48fb4eb3$var$ActionType = {}));\nfunction $6fc50a6f48fb4eb3$var$actionToString(a) {\n    return `${a.coordinate.toString()}: ${a.type} value ${a.value}, reason: ${a.reasonString}`;\n}\nfunction $6fc50a6f48fb4eb3$export$a3896fdc4a7ed91d(board) {\n    const ret = new Array();\n    const addAction = function(targetCell, value, sourceCell) {\n        if (targetCell.state === (0, $c02655ebd8daba6d$export$356a9607d9b9ba07).RESOLVING && targetCell.draftNumbers.has(value)) ret.push({\n            coordinate: targetCell.coordinate,\n            type: $6fc50a6f48fb4eb3$var$ActionType.REMOVE_DRAFT_NUMBER,\n            value: value,\n            reasonString: `Conflict with ${sourceCell.toString()}`\n        });\n    };\n    for(let i = 0; i < (0, $c02655ebd8daba6d$export$7331fb0f7c654bd8); i++){\n        const coord = $c02655ebd8daba6d$export$d6e0f5996cc55599.fromLinearIndex(i);\n        const cell = board.cells[i];\n        if (cell.state === (0, $c02655ebd8daba6d$export$356a9607d9b9ba07).RESOLVING) continue;\n        if (cell.value === null) throw new Error('Invalid state');\n        const valueToRemove = cell.value;\n        for (const targetCell of board.getCellsByColumn(coord.x))addAction(targetCell, valueToRemove, cell);\n        for (const targetCell of board.getCellsByRow(coord.y))addAction(targetCell, valueToRemove, cell);\n        for (const targetCell of board.getCellsBySquare(coord.squareIndex))addAction(targetCell, valueToRemove, cell);\n    }\n    return ret;\n}\nfunction $6fc50a6f48fb4eb3$var$uniqueValueSetter(board) {\n    const ret = new Array();\n    const addAction = function(cell, value) {\n        ret.push({\n            coordinate: cell.coordinate,\n            type: $6fc50a6f48fb4eb3$var$ActionType.FILL_IN_NUMBER,\n            value: value,\n            reasonString: null\n        });\n    };\n    for(let i = 0; i < (0, $c02655ebd8daba6d$export$7331fb0f7c654bd8); i++){\n        const cell = board.cells[i];\n        if (cell.state !== (0, $c02655ebd8daba6d$export$356a9607d9b9ba07).RESOLVING) continue;\n        const value = cell.draftNumbers.getUnique();\n        if (value !== null) addAction(cell, value);\n    }\n    return ret;\n}\nfunction $6fc50a6f48fb4eb3$export$f7ad0328861e2f03(board) {\n    const resolvingBoard = $6fc50a6f48fb4eb3$export$6e629d5b6a809bce.createFromBoard(board);\n    // eslint-disable-next-line no-constant-condition\n    while(true){\n        const resolvers = [\n            {\n                resolve: $6fc50a6f48fb4eb3$export$a3896fdc4a7ed91d\n            },\n            {\n                resolve: $6fc50a6f48fb4eb3$var$uniqueValueSetter\n            }\n        ];\n        const before = resolvingBoard.getEmptyCellsCount();\n        for (const resolver of resolvers){\n            const actions = resolver.resolve(resolvingBoard);\n            console.log(actions.length);\n            resolvingBoard.takeActions(actions);\n        }\n        const after = resolvingBoard.getEmptyCellsCount();\n        console.log(resolvingBoard.printBoard());\n        if (before === after) break;\n    }\n// console.log(resolvingBoard.printBoard());\n// for (const cell of resolvingBoard.cells){\n// console.log(cell.possibleValues.toString());}\n}\n\n\nclass $ff40705a305463f8$export$985739bfa5723e08 {\n    answerBoard;\n    puzzleBoard;\n    startTime;\n    endTime = null;\n    mistakes = 0;\n    constructor(answer, puzzle){\n        this.answerBoard = answer;\n        this.puzzleBoard = (0, $6fc50a6f48fb4eb3$export$6e629d5b6a809bce).createFromBoard(puzzle);\n        this.startTime = performance.now();\n    }\n    fillInNumber(coord, value) {\n        const cell = this.puzzleBoard.cells[coord.linearIndex];\n        if (cell.hasNumber()) {\n            console.log('%s already have number', coord);\n            return;\n        }\n        // TODO: This part should be able to be controlled by rules.\n        if (this.answerBoard.cells[coord.linearIndex].value !== value) {\n            alert('Not correct :)');\n            this.mistakes++;\n            return;\n        }\n        cell.fillNumber(value);\n        if (this.isAllCorrect()) {\n            this.endTime = performance.now();\n            alert('Congratulations!!!');\n        }\n    }\n    toggleDraftNumber(coord, value) {\n        const cell = this.puzzleBoard.cells[coord.linearIndex];\n        if (cell.hasNumber()) {\n            console.log('%s already have number', coord);\n            return;\n        }\n        if (cell.hasDraftNumber(value)) cell.removeDraftNumber(value);\n        else cell.addDraftNumber(value);\n    }\n    recalculateDraftNumbers() {\n        for (const cell of this.puzzleBoard.cells)if (!cell.hasNumber()) cell.addAllDraftNumber();\n        const actions = (0, $6fc50a6f48fb4eb3$export$a3896fdc4a7ed91d)(this.puzzleBoard);\n        this.puzzleBoard.takeActions(actions);\n    }\n    getEmptyCellsCount() {\n        let cnt = 0;\n        for (const cell of this.puzzleBoard.cells)if (!cell.hasNumber()) cnt++;\n        return cnt;\n    }\n    getElapsedSeconds() {\n        let end = performance.now();\n        if (this.endTime !== null) end = this.endTime;\n        return Math.round((end - this.startTime) / 1000);\n    }\n    isAllCorrect() {\n        for(let i = 0; i < 81; ++i){\n            if (this.puzzleBoard.cells[i].value !== this.answerBoard.cells[i].value) return false;\n        }\n        return true;\n    }\n}\n\n\nfunction $c283b26f8307214a$var$switchPage(from, to) {\n    if (from !== null) from.classList.remove('visible');\n    to.classList.add('visible');\n}\nasync function $c283b26f8307214a$var$main() {\n    const welcomePageDom = document.getElementById('welcome-page');\n    // Show the welcome page at first.\n    $c283b26f8307214a$var$switchPage(null, welcomePageDom);\n    await (0, $fb6cc04260f9a749$export$2e2bcd8739ae039)().catch((error)=>{\n        console.error('Error initializing WASM module:', error);\n    });\n    $fb6cc04260f9a749$export$ede763ccc882b3e5();\n    console.log('wasm loaded');\n    const arr = new Uint8Array([\n        4,\n        0,\n        0,\n        0,\n        3,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        6,\n        0,\n        0,\n        8,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        5,\n        0,\n        0,\n        9,\n        0,\n        0,\n        8,\n        0,\n        0,\n        0,\n        0,\n        6,\n        0,\n        0,\n        0,\n        7,\n        0,\n        2,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        2,\n        7,\n        0,\n        0,\n        5,\n        0,\n        3,\n        0,\n        0,\n        0,\n        0,\n        4,\n        0,\n        9,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0\n    ]);\n    console.log($fb6cc04260f9a749$export$3317e00185b5980d(arr));\n    console.log(arr);\n    document.body.style.backgroundColor = (0, $f360512a3c30bea8$export$3bfd0d5209a8006a)().color_background;\n    const gamePageDom = document.getElementById('game-page');\n    // Create a random game.\n    const puzzleArr = new Uint8Array(81);\n    $fb6cc04260f9a749$export$80d376111cc09ad7(60, puzzleArr);\n    const answerArr = new Uint8Array(puzzleArr);\n    $fb6cc04260f9a749$export$3317e00185b5980d(answerArr);\n    const answer = (0, $c02655ebd8daba6d$export$3ca9368aae595c1d).createBoardFromString(answerArr.join('').replaceAll('0', '.'));\n    const puzzle = (0, $c02655ebd8daba6d$export$3ca9368aae595c1d).createBoardFromString(puzzleArr.join('').replaceAll('0', '.'));\n    const game = new (0, $ff40705a305463f8$export$985739bfa5723e08)(answer, puzzle);\n    const controller = new (0, $95f0dc4e46c5e870$export$f3f3f6c0124f08de)(game, gamePageDom);\n    // We can add logic to remove this listener when necessary in the future.\n    window.addEventListener('keydown', (ev)=>{\n        if (controller.handleKeyDownEvent(ev)) ev.preventDefault();\n    });\n    // Show the game page.\n    $c283b26f8307214a$var$switchPage(welcomePageDom, gamePageDom);\n}\n// eslint-disable-next-line @typescript-eslint/no-floating-promises\n$c283b26f8307214a$var$main();\n\n\n//# sourceMappingURL=index.cc854c23.js.map\n","\"use strict\";\n\nvar mapping = new Map();\nfunction register(baseUrl, manifest) {\n  for (var i = 0; i < manifest.length - 1; i += 2) {\n    mapping.set(manifest[i], {\n      baseUrl: baseUrl,\n      path: manifest[i + 1]\n    });\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping.get(id);\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return new URL(resolved.path, resolved.baseUrl).toString();\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(new __parcel__URL__(\"\").toString(),JSON.parse(\"[\\\"f7twW\\\",\\\"index.cc854c23.js\\\",\\\"8uHta\\\",\\\"sudoku_wasm_bg.970e23ea.wasm\\\"]\"));","import init, * as wasm from '../wasm/pkg/sudoku_wasm.js';\nimport { getCurrentTheme } from './theme.js';\nimport { GenericBoard } from './types.js';\nimport { GameController } from './game_controller.js';\nimport { Game } from './game.js';\nfunction switchPage(from, to) {\n    if (from !== null) {\n        from.classList.remove('visible');\n    }\n    to.classList.add('visible');\n}\nasync function main() {\n    const welcomePageDom = document.getElementById('welcome-page');\n    // Show the welcome page at first.\n    switchPage(null, welcomePageDom);\n    await init().catch(error => {\n        console.error('Error initializing WASM module:', error);\n    });\n    wasm.init_panic_hook();\n    console.log('wasm loaded');\n    const arr = new Uint8Array([\n        4, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 1, 0, 0, 0, 0, 5, 0, 0, 9, 0, 0, 8, 0, 0, 0, 0, 6, 0, 0, 0, 7, 0, 2, 0,\n        0, 0, 0, 0, 0, 0, 0, 1, 0, 2, 7, 0, 0, 5, 0, 3, 0, 0, 0, 0, 4, 0, 9, 0, 0,\n        0, 0, 0, 0, 0, 0,\n    ]);\n    console.log(wasm.fast_resolve(arr));\n    console.log(arr);\n    document.body.style.backgroundColor = getCurrentTheme().color_background;\n    const gamePageDom = document.getElementById('game-page');\n    // Create a random game.\n    const puzzleArr = new Uint8Array(81);\n    wasm.generate(60, puzzleArr);\n    const answerArr = new Uint8Array(puzzleArr);\n    wasm.fast_resolve(answerArr);\n    const answer = GenericBoard.createBoardFromString(answerArr.join('').replaceAll('0', '.'));\n    const puzzle = GenericBoard.createBoardFromString(puzzleArr.join('').replaceAll('0', '.'));\n    const game = new Game(answer, puzzle);\n    const controller = new GameController(game, gamePageDom);\n    // We can add logic to remove this listener when necessary in the future.\n    window.addEventListener('keydown', ev => {\n        if (controller.handleKeyDownEvent(ev)) {\n            ev.preventDefault();\n        }\n    });\n    // Show the game page.\n    switchPage(welcomePageDom, gamePageDom);\n}\n// eslint-disable-next-line @typescript-eslint/no-floating-promises\nmain();\n//# sourceMappingURL=main.js.map","import init, * as wasm from '../wasm/pkg/sudoku_wasm.js';\nimport {getCurrentTheme} from './theme.js';\nimport {GenericBoard} from './types.js';\nimport {GameController} from './game_controller.js';\nimport {Game} from './game.js';\n\nfunction switchPage(from: HTMLElement | null, to: HTMLElement) {\n  if (from !== null) {\n    from.classList.remove('visible');\n  }\n  to.classList.add('visible');\n}\n\nasync function main() {\n  const welcomePageDom = document.getElementById('welcome-page')!;\n\n  // Show the welcome page at first.\n  switchPage(null, welcomePageDom);\n\n  await init().catch(error => {\n    console.error('Error initializing WASM module:', error);\n  });\n\n  wasm.init_panic_hook();\n  console.log('wasm loaded');\n  const arr = new Uint8Array([\n    4, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0, 1, 0, 0, 0, 0, 5, 0, 0, 9, 0, 0, 8, 0, 0, 0, 0, 6, 0, 0, 0, 7, 0, 2, 0,\n    0, 0, 0, 0, 0, 0, 0, 1, 0, 2, 7, 0, 0, 5, 0, 3, 0, 0, 0, 0, 4, 0, 9, 0, 0,\n    0, 0, 0, 0, 0, 0,\n  ]);\n  console.log(wasm.fast_resolve(arr));\n  console.log(arr);\n\n  document.body.style.backgroundColor = getCurrentTheme().color_background;\n\n  const gamePageDom = document.getElementById('game-page')!;\n\n  // Create a random game.\n  const puzzleArr = new Uint8Array(81);\n  wasm.generate(60, puzzleArr);\n  const answerArr = new Uint8Array(puzzleArr);\n  wasm.fast_resolve(answerArr);\n\n  const answer = GenericBoard.createBoardFromString(\n    answerArr.join('').replaceAll('0', '.'),\n  );\n  const puzzle = GenericBoard.createBoardFromString(\n    puzzleArr.join('').replaceAll('0', '.'),\n  );\n\n  const game = new Game(answer, puzzle);\n  const controller = new GameController(game, gamePageDom);\n\n  // We can add logic to remove this listener when necessary in the future.\n  window.addEventListener('keydown', ev => {\n    if (controller.handleKeyDownEvent(ev)) {\n      ev.preventDefault();\n    }\n  });\n\n  // Show the game page.\n  switchPage(welcomePageDom, gamePageDom);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-floating-promises\nmain();\n","let wasm;\n\nfunction addToExternrefTable0(obj) {\n    const idx = wasm.__externref_table_alloc();\n    wasm.__wbindgen_export_2.set(idx, obj);\n    return idx;\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        const idx = addToExternrefTable0(e);\n        wasm.__wbindgen_exn_store(idx);\n    }\n}\n\nconst cachedTextDecoder = (typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-8', { ignoreBOM: true, fatal: true }) : { decode: () => { throw Error('TextDecoder not available') } } );\n\nif (typeof TextDecoder !== 'undefined') { cachedTextDecoder.decode(); };\n\nlet cachedUint8ArrayMemory0 = null;\n\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.byteLength === 0) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(ptr, ptr + len));\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst cachedTextEncoder = (typeof TextEncoder !== 'undefined' ? new TextEncoder('utf-8') : { encode: () => { throw Error('TextEncoder not available') } } );\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8ArrayMemory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8ArrayMemory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n        ptr = realloc(ptr, len, offset, 1) >>> 0;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nlet cachedDataViewMemory0 = null;\n\nfunction getDataViewMemory0() {\n    if (cachedDataViewMemory0 === null || cachedDataViewMemory0.buffer.detached === true || (cachedDataViewMemory0.buffer.detached === undefined && cachedDataViewMemory0.buffer !== wasm.memory.buffer)) {\n        cachedDataViewMemory0 = new DataView(wasm.memory.buffer);\n    }\n    return cachedDataViewMemory0;\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nexport function init_panic_hook() {\n    wasm.init_panic_hook();\n}\n\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1, 1) >>> 0;\n    getUint8ArrayMemory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nfunction takeFromExternrefTable0(idx) {\n    const value = wasm.__wbindgen_export_2.get(idx);\n    wasm.__externref_table_dealloc(idx);\n    return value;\n}\n/**\n * @param {Uint8Array} board\n * @returns {number}\n */\nexport function fast_resolve(board) {\n    var ptr0 = passArray8ToWasm0(board, wasm.__wbindgen_malloc);\n    var len0 = WASM_VECTOR_LEN;\n    const ret = wasm.fast_resolve(ptr0, len0, board);\n    if (ret[2]) {\n        throw takeFromExternrefTable0(ret[1]);\n    }\n    return ret[0] >>> 0;\n}\n\n/**\n * @param {number} non_empty_cnt\n * @param {Uint8Array} output_puzzle\n */\nexport function generate(non_empty_cnt, output_puzzle) {\n    var ptr0 = passArray8ToWasm0(output_puzzle, wasm.__wbindgen_malloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.generate(non_empty_cnt, ptr0, len0, output_puzzle);\n}\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                if (module.headers.get('Content-Type') != 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction __wbg_get_imports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg_buffer_61b7ce01341d7f88 = function(arg0) {\n        const ret = arg0.buffer;\n        return ret;\n    };\n    imports.wbg.__wbg_call_500db948e69c7330 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = arg0.call(arg1, arg2);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_call_b0d8e36992d9900d = function() { return handleError(function (arg0, arg1) {\n        const ret = arg0.call(arg1);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_crypto_ed58b8e10a292839 = function(arg0) {\n        const ret = arg0.crypto;\n        return ret;\n    };\n    imports.wbg.__wbg_error_7534b8e9a36f1ab4 = function(arg0, arg1) {\n        let deferred0_0;\n        let deferred0_1;\n        try {\n            deferred0_0 = arg0;\n            deferred0_1 = arg1;\n            console.error(getStringFromWasm0(arg0, arg1));\n        } finally {\n            wasm.__wbindgen_free(deferred0_0, deferred0_1, 1);\n        }\n    };\n    imports.wbg.__wbg_getRandomValues_bcb4912f16000dc4 = function() { return handleError(function (arg0, arg1) {\n        arg0.getRandomValues(arg1);\n    }, arguments) };\n    imports.wbg.__wbg_msCrypto_0a36e2ec3a343d26 = function(arg0) {\n        const ret = arg0.msCrypto;\n        return ret;\n    };\n    imports.wbg.__wbg_new_3ff5b33b1ce712df = function(arg0) {\n        const ret = new Uint8Array(arg0);\n        return ret;\n    };\n    imports.wbg.__wbg_new_8a6f238a6ece86ea = function() {\n        const ret = new Error();\n        return ret;\n    };\n    imports.wbg.__wbg_newnoargs_fd9e4bf8be2bc16d = function(arg0, arg1) {\n        const ret = new Function(getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbg_newwithbyteoffsetandlength_ba35896968751d91 = function(arg0, arg1, arg2) {\n        const ret = new Uint8Array(arg0, arg1 >>> 0, arg2 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_newwithlength_34ce8f1051e74449 = function(arg0) {\n        const ret = new Uint8Array(arg0 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_node_02999533c4ea02e3 = function(arg0) {\n        const ret = arg0.node;\n        return ret;\n    };\n    imports.wbg.__wbg_now_2c95c9de01293173 = function(arg0) {\n        const ret = arg0.now();\n        return ret;\n    };\n    imports.wbg.__wbg_performance_7a3ffd0b17f663ad = function(arg0) {\n        const ret = arg0.performance;\n        return ret;\n    };\n    imports.wbg.__wbg_process_5c1d670bc53614b8 = function(arg0) {\n        const ret = arg0.process;\n        return ret;\n    };\n    imports.wbg.__wbg_randomFillSync_ab2cfe79ebbf2740 = function() { return handleError(function (arg0, arg1) {\n        arg0.randomFillSync(arg1);\n    }, arguments) };\n    imports.wbg.__wbg_require_79b1e9274cde3c87 = function() { return handleError(function () {\n        const ret = module.require;\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_set_23d69db4e5c66a6e = function(arg0, arg1, arg2) {\n        arg0.set(arg1, arg2 >>> 0);\n    };\n    imports.wbg.__wbg_stack_0ed75d68575b0f3c = function(arg0, arg1) {\n        const ret = arg1.stack;\n        const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len1 = WASM_VECTOR_LEN;\n        getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\n        getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_0be7472e492ad3e3 = function() {\n        const ret = typeof global === 'undefined' ? null : global;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_THIS_1a6eb482d12c9bfb = function() {\n        const ret = typeof globalThis === 'undefined' ? null : globalThis;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_SELF_1dc398a895c82351 = function() {\n        const ret = typeof self === 'undefined' ? null : self;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_WINDOW_ae1c80c7eea8d64a = function() {\n        const ret = typeof window === 'undefined' ? null : window;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_subarray_46adeb9b86949d12 = function(arg0, arg1, arg2) {\n        const ret = arg0.subarray(arg1 >>> 0, arg2 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_versions_c71aa1626a93e0a1 = function(arg0) {\n        const ret = arg0.versions;\n        return ret;\n    };\n    imports.wbg.__wbindgen_copy_to_typed_array = function(arg0, arg1, arg2) {\n        new Uint8Array(arg2.buffer, arg2.byteOffset, arg2.byteLength).set(getArrayU8FromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbindgen_error_new = function(arg0, arg1) {\n        const ret = new Error(getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbindgen_init_externref_table = function() {\n        const table = wasm.__wbindgen_export_2;\n        const offset = table.grow(4);\n        table.set(0, undefined);\n        table.set(offset + 0, undefined);\n        table.set(offset + 1, null);\n        table.set(offset + 2, true);\n        table.set(offset + 3, false);\n        ;\n    };\n    imports.wbg.__wbindgen_is_function = function(arg0) {\n        const ret = typeof(arg0) === 'function';\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_object = function(arg0) {\n        const val = arg0;\n        const ret = typeof(val) === 'object' && val !== null;\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_string = function(arg0) {\n        const ret = typeof(arg0) === 'string';\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_undefined = function(arg0) {\n        const ret = arg0 === undefined;\n        return ret;\n    };\n    imports.wbg.__wbindgen_memory = function() {\n        const ret = wasm.memory;\n        return ret;\n    };\n    imports.wbg.__wbindgen_string_new = function(arg0, arg1) {\n        const ret = getStringFromWasm0(arg0, arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n\n    return imports;\n}\n\nfunction __wbg_init_memory(imports, memory) {\n\n}\n\nfunction __wbg_finalize_init(instance, module) {\n    wasm = instance.exports;\n    __wbg_init.__wbindgen_wasm_module = module;\n    cachedDataViewMemory0 = null;\n    cachedUint8ArrayMemory0 = null;\n\n\n    wasm.__wbindgen_start();\n    return wasm;\n}\n\nfunction initSync(module) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module !== 'undefined') {\n        if (Object.getPrototypeOf(module) === Object.prototype) {\n            ({module} = module)\n        } else {\n            console.warn('using deprecated parameters for `initSync()`; pass a single object instead')\n        }\n    }\n\n    const imports = __wbg_get_imports();\n\n    __wbg_init_memory(imports);\n\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n\n    const instance = new WebAssembly.Instance(module, imports);\n\n    return __wbg_finalize_init(instance, module);\n}\n\nasync function __wbg_init(module_or_path) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module_or_path !== 'undefined') {\n        if (Object.getPrototypeOf(module_or_path) === Object.prototype) {\n            ({module_or_path} = module_or_path)\n        } else {\n            console.warn('using deprecated parameters for the initialization function; pass a single object instead')\n        }\n    }\n\n    if (typeof module_or_path === 'undefined') {\n        module_or_path = new URL('sudoku_wasm_bg.wasm', import.meta.url);\n    }\n    const imports = __wbg_get_imports();\n\n    if (typeof module_or_path === 'string' || (typeof Request === 'function' && module_or_path instanceof Request) || (typeof URL === 'function' && module_or_path instanceof URL)) {\n        module_or_path = fetch(module_or_path);\n    }\n\n    __wbg_init_memory(imports);\n\n    const { instance, module } = await __wbg_load(await module_or_path, imports);\n\n    return __wbg_finalize_init(instance, module);\n}\n\nexport { initSync };\nexport default __wbg_init;\n","module.exports = new __parcel__URL__(\"sudoku_wasm_bg.970e23ea.wasm\").toString();","const DEFAULT_THEME = {\n    color_prefilled: '#050505',\n    color_resolved: '#156363',\n    color_draft: '#447862',\n    color_highlight_foreground: '#007896',\n    color_highlight_bg1: rgba('#dcc1c3', 1),\n    color_highlight_bg2: rgba('#dcd1d1', 0.5),\n    color_background: '#fefefe',\n};\nexport function getCurrentTheme() {\n    return DEFAULT_THEME;\n}\nfunction rgba(hex, alpha) {\n    hex = hex.replace('#', '');\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\n//# sourceMappingURL=theme.js.map","export interface Theme {\n  color_prefilled: string;\n  color_resolved: string;\n  color_draft: string;\n  color_highlight_foreground: string;\n  color_highlight_bg1: string;\n  color_highlight_bg2: string;\n  color_background: string;\n}\n\nconst DEFAULT_THEME: Theme = {\n  color_prefilled: '#050505',\n  color_resolved: '#156363',\n  color_draft: '#447862',\n  color_highlight_foreground: '#007896',\n  color_highlight_bg1: rgba('#dcc1c3', 1),\n  color_highlight_bg2: rgba('#dcd1d1', 0.5),\n  color_background: '#fefefe',\n};\n\nexport function getCurrentTheme(): Theme {\n  return DEFAULT_THEME;\n}\n\nfunction rgba(hex: string, alpha: number): string {\n  hex = hex.replace('#', '');\n  const r = parseInt(hex.substring(0, 2), 16);\n  const g = parseInt(hex.substring(2, 4), 16);\n  const b = parseInt(hex.substring(4, 6), 16);\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\n","export const MAX_NUMBER = 9;\nexport const CELLS_NUMBER = MAX_NUMBER * MAX_NUMBER;\nconst CHAR_FOR_EMPTY_CELL = '.';\nfunction assertIndexInRange(value, desc) {\n    if (!Number.isInteger(value) || value < 0 || value >= MAX_NUMBER) {\n        throw new RangeError(`Invalid ${desc}: ${value}`);\n    }\n}\nfunction assertCellValueInRange(value) {\n    if (!Number.isInteger(value) || value < 1 || value > MAX_NUMBER) {\n        throw new RangeError(`Invalid cell value: ${value}`);\n    }\n}\nclass CellValueSet {\n    bitmap;\n    constructor(initValue = false) {\n        this.bitmap = new Array(MAX_NUMBER + 1).fill(initValue);\n    }\n    add(value) {\n        this.bitmap[value] = true;\n        return this;\n    }\n    delete(value) {\n        const ret = this.bitmap[value];\n        this.bitmap[value] = false;\n        return ret;\n    }\n    has(value) {\n        return this.bitmap[value];\n    }\n    clear() {\n        this.bitmap.fill(false);\n    }\n    addAll() {\n        this.bitmap.fill(true);\n    }\n    hasAll() {\n        for (let i = 1; i <= MAX_NUMBER; i++) {\n            if (!this.bitmap[i])\n                return false;\n        }\n        return true;\n    }\n    getUnique() {\n        let ret = null;\n        for (let i = 1; i <= MAX_NUMBER; i++) {\n            if (!this.bitmap[i])\n                continue;\n            if (ret === null) {\n                ret = i;\n            }\n            else {\n                return null;\n            }\n        }\n        return ret;\n    }\n    toString() {\n        let ret = '';\n        for (let i = 1; i <= MAX_NUMBER; i++) {\n            if (this.bitmap[i])\n                ret += `${i} `;\n        }\n        return ret + `: ${this.getUnique()}`;\n    }\n}\nexport class Coordinates {\n    x;\n    y;\n    linearIndex;\n    squareIndex;\n    constructor(x, y) {\n        assertIndexInRange(x, 'x');\n        assertIndexInRange(y, 'y');\n        this.x = x;\n        this.y = y;\n        this.linearIndex = x + y * MAX_NUMBER;\n        this.squareIndex = Math.floor(x / 3) + Math.floor(y / 3) * 3;\n    }\n    static fromLinearIndex(i) {\n        return new Coordinates(i % MAX_NUMBER, Math.floor(i / MAX_NUMBER));\n    }\n    toString() {\n        return `(x: ${this.x}, y: ${this.y}, square: ${this.squareIndex})`;\n    }\n}\nexport class Cell {\n    coordinate;\n    value;\n    constructor(coordinate, value) {\n        if (value !== null) {\n            assertCellValueInRange(value);\n        }\n        this.coordinate = coordinate;\n        this.value = value;\n    }\n    toChar() {\n        return this.value === null ? CHAR_FOR_EMPTY_CELL : this.value.toString();\n    }\n    static fromChar(coordinate, char) {\n        if (char === CHAR_FOR_EMPTY_CELL) {\n            return new Cell(coordinate, null);\n        }\n        return new Cell(coordinate, parseInt(char));\n    }\n}\nexport function printCells(cells) {\n    return cells.map(cell => cell.toChar()).join('');\n}\nexport function validateCells(cells, strict = false) {\n    if (cells.length !== MAX_NUMBER) {\n        throw new Error(`Got cell size ${cells.length}, want ${MAX_NUMBER}`);\n    }\n    const values = new CellValueSet();\n    for (const cell of cells) {\n        if (cell.value === null) {\n            continue;\n        }\n        if (values.has(cell.value)) {\n            return false;\n        }\n    }\n    return !strict || values.hasAll();\n}\nexport var ResolvingCellState;\n(function (ResolvingCellState) {\n    ResolvingCellState[\"PREFILLED\"] = \"Prefilled\";\n    ResolvingCellState[\"RESOLVING\"] = \"Resolving\";\n    ResolvingCellState[\"RESOLVED\"] = \"Resolved\";\n})(ResolvingCellState || (ResolvingCellState = {}));\nexport class ResolvingCell extends Cell {\n    state;\n    draftNumbers;\n    static newPrefilled(coordinate, value) {\n        return new ResolvingCell(coordinate, ResolvingCellState.PREFILLED, value);\n    }\n    static newResolving(coordinate) {\n        return new ResolvingCell(coordinate, ResolvingCellState.RESOLVING, null);\n    }\n    constructor(coordinate, state, value) {\n        super(coordinate, value);\n        this.state = state;\n        this.draftNumbers = new CellValueSet(false);\n    }\n    hasNumber() {\n        switch (this.state) {\n            case ResolvingCellState.PREFILLED:\n            case ResolvingCellState.RESOLVED:\n                return true;\n            case ResolvingCellState.RESOLVING:\n                return false;\n        }\n    }\n    addAllDraftNumber() {\n        for (let i = 1; i <= MAX_NUMBER; i++) {\n            this.draftNumbers.add(i);\n        }\n    }\n    hasDraftNumber(value) {\n        return this.draftNumbers.has(value);\n    }\n    addDraftNumber(value) {\n        this.draftNumbers.add(value);\n    }\n    removeDraftNumber(value) {\n        this.draftNumbers.delete(value);\n    }\n    fillNumber(value) {\n        assertCellValueInRange(value);\n        this.value = value;\n        this.draftNumbers.clear();\n        this.state = ResolvingCellState.RESOLVED;\n    }\n    toString() {\n        return `${this.coordinate} state: ${this.state}, possibleValues: ${this.draftNumbers}`;\n    }\n}\nexport class GenericBoard {\n    cells;\n    constructor(cells) {\n        for (let i = 0; i < CELLS_NUMBER; i++) {\n            if (cells[i].coordinate.linearIndex !== i) {\n                throw new Error(`Invalid cell ${cells[i]}`);\n            }\n        }\n        this.cells = cells;\n    }\n    static createBoardFromString(chars) {\n        // Drop all empty chars.\n        chars = chars.replace(/\\s/g, '');\n        if (chars.length !== CELLS_NUMBER) {\n            throw new Error(`Input char length ${chars.length}, want ${CELLS_NUMBER}`);\n        }\n        const cells = new Array();\n        for (let i = 0; i < CELLS_NUMBER; i++) {\n            cells.push(Cell.fromChar(Coordinates.fromLinearIndex(i), chars[i]));\n        }\n        return new GenericBoard(cells);\n    }\n    printBoard() {\n        let ret = '';\n        for (let i = 0; i < CELLS_NUMBER; i++) {\n            ret += this.cells[i].toChar();\n            if (i % MAX_NUMBER === MAX_NUMBER - 1) {\n                ret += '\\n';\n            }\n        }\n        return ret;\n    }\n    getCellByCoord(coord) {\n        return this.cells[coord.linearIndex];\n    }\n    getCellsByRow(rowIndex) {\n        assertIndexInRange(rowIndex, 'rowIndex');\n        const ret = new Array();\n        for (let i = 0; i < MAX_NUMBER; i++) {\n            ret.push(this.cells[rowIndex * MAX_NUMBER + i]);\n        }\n        return ret;\n    }\n    getCellsByColumn(columnIndex) {\n        assertIndexInRange(columnIndex, 'columnIndex');\n        const ret = new Array();\n        for (let i = 0; i < MAX_NUMBER; i++) {\n            ret.push(this.cells[i * MAX_NUMBER + columnIndex]);\n        }\n        return ret;\n    }\n    getCellsBySquare(squareIndex) {\n        assertIndexInRange(squareIndex, 'squareIndex');\n        return this.cells.filter(cell => cell.coordinate.squareIndex === squareIndex);\n    }\n    getCellsByNeighborToCoord(coord) {\n        return mergeCellLists([\n            this.getCellsByColumn(coord.x),\n            this.getCellsByRow(coord.y),\n            this.getCellsBySquare(coord.squareIndex),\n        ]);\n    }\n    validate(strict) {\n        for (let i = 0; i < MAX_NUMBER; i++) {\n            if (!validateCells(this.getCellsByRow(i), strict))\n                return false;\n            if (!validateCells(this.getCellsByColumn(i), strict))\n                return false;\n            if (!validateCells(this.getCellsBySquare(i), strict))\n                return false;\n        }\n        return true;\n    }\n}\nexport function mergeCellLists(arrays) {\n    const seen = new Set();\n    const merged = [];\n    for (const arr of arrays) {\n        if (arr) {\n            for (const cell of arr) {\n                if (cell) {\n                    if (!seen.has(cell)) {\n                        seen.add(cell);\n                        merged.push(cell);\n                    }\n                }\n            }\n        }\n    }\n    return merged;\n}\n//# sourceMappingURL=types.js.map","export {};\n\nexport const MAX_NUMBER = 9;\nexport const CELLS_NUMBER = MAX_NUMBER * MAX_NUMBER;\nconst CHAR_FOR_EMPTY_CELL = '.';\n\nfunction assertIndexInRange(value: number, desc: string): void {\n  if (!Number.isInteger(value) || value < 0 || value >= MAX_NUMBER) {\n    throw new RangeError(`Invalid ${desc}: ${value}`);\n  }\n}\n\nfunction assertCellValueInRange(value: number): void {\n  if (!Number.isInteger(value) || value < 1 || value > MAX_NUMBER) {\n    throw new RangeError(`Invalid cell value: ${value}`);\n  }\n}\n\nclass CellValueSet {\n  readonly bitmap: Array<boolean>;\n\n  constructor(initValue = false) {\n    this.bitmap = new Array<boolean>(MAX_NUMBER + 1).fill(initValue);\n  }\n\n  add(value: number): CellValueSet {\n    this.bitmap[value] = true;\n    return this;\n  }\n  delete(value: number): boolean {\n    const ret = this.bitmap[value];\n    this.bitmap[value] = false;\n    return ret;\n  }\n  has(value: number): boolean {\n    return this.bitmap[value];\n  }\n\n  clear(): void {\n    this.bitmap.fill(false);\n  }\n\n  addAll(): void {\n    this.bitmap.fill(true);\n  }\n  hasAll(): boolean {\n    for (let i = 1; i <= MAX_NUMBER; i++) {\n      if (!this.bitmap[i]) return false;\n    }\n    return true;\n  }\n  getUnique(): number | null {\n    let ret = null;\n    for (let i = 1; i <= MAX_NUMBER; i++) {\n      if (!this.bitmap[i]) continue;\n      if (ret === null) {\n        ret = i;\n      } else {\n        return null;\n      }\n    }\n    return ret;\n  }\n  toString(): string {\n    let ret = '';\n    for (let i = 1; i <= MAX_NUMBER; i++) {\n      if (this.bitmap[i]) ret += `${i} `;\n    }\n    return ret + `: ${this.getUnique()}`;\n  }\n}\n\nexport class Coordinates {\n  readonly x: number;\n  readonly y: number;\n  readonly linearIndex: number;\n  readonly squareIndex: number;\n\n  constructor(x: number, y: number) {\n    assertIndexInRange(x, 'x');\n    assertIndexInRange(y, 'y');\n    this.x = x;\n    this.y = y;\n    this.linearIndex = x + y * MAX_NUMBER;\n    this.squareIndex = Math.floor(x / 3) + Math.floor(y / 3) * 3;\n  }\n\n  static fromLinearIndex(i: number): Coordinates {\n    return new Coordinates(i % MAX_NUMBER, Math.floor(i / MAX_NUMBER));\n  }\n\n  toString(): string {\n    return `(x: ${this.x}, y: ${this.y}, square: ${this.squareIndex})`;\n  }\n}\n\nexport class Cell {\n  readonly coordinate: Coordinates;\n  value: number | null;\n\n  constructor(coordinate: Coordinates, value: number | null) {\n    if (value !== null) {\n      assertCellValueInRange(value);\n    }\n    this.coordinate = coordinate;\n    this.value = value;\n  }\n\n  toChar(): string {\n    return this.value === null ? CHAR_FOR_EMPTY_CELL : this.value.toString();\n  }\n\n  static fromChar(coordinate: Coordinates, char: string): Cell {\n    if (char === CHAR_FOR_EMPTY_CELL) {\n      return new Cell(coordinate, null);\n    }\n    return new Cell(coordinate, parseInt(char));\n  }\n}\n\nexport function printCells(cells: ReadonlyArray<Cell>): string {\n  return cells.map(cell => cell.toChar()).join('');\n}\n\nexport function validateCells(\n  cells: ReadonlyArray<Cell>,\n  strict = false,\n): boolean {\n  if (cells.length !== MAX_NUMBER) {\n    throw new Error(`Got cell size ${cells.length}, want ${MAX_NUMBER}`);\n  }\n\n  const values = new CellValueSet();\n  for (const cell of cells) {\n    if (cell.value === null) {\n      continue;\n    }\n    if (values.has(cell.value)) {\n      return false;\n    }\n  }\n\n  return !strict || values.hasAll();\n}\n\nexport enum ResolvingCellState {\n  PREFILLED = 'Prefilled',\n  RESOLVING = 'Resolving',\n  RESOLVED = 'Resolved',\n}\n\nexport class ResolvingCell extends Cell {\n  state: ResolvingCellState;\n  readonly draftNumbers: CellValueSet;\n\n  static newPrefilled(coordinate: Coordinates, value: number): ResolvingCell {\n    return new ResolvingCell(coordinate, ResolvingCellState.PREFILLED, value);\n  }\n\n  static newResolving(coordinate: Coordinates): ResolvingCell {\n    return new ResolvingCell(coordinate, ResolvingCellState.RESOLVING, null);\n  }\n\n  private constructor(\n    coordinate: Coordinates,\n    state: ResolvingCellState,\n    value: number | null,\n  ) {\n    super(coordinate, value);\n    this.state = state;\n    this.draftNumbers = new CellValueSet(false);\n  }\n\n  hasNumber(): boolean {\n    switch (this.state) {\n      case ResolvingCellState.PREFILLED:\n      case ResolvingCellState.RESOLVED:\n        return true;\n      case ResolvingCellState.RESOLVING:\n        return false;\n    }\n  }\n\n  addAllDraftNumber(): void {\n    for (let i = 1; i <= MAX_NUMBER; i++) {\n      this.draftNumbers.add(i);\n    }\n  }\n\n  hasDraftNumber(value: number): boolean {\n    return this.draftNumbers.has(value);\n  }\n\n  addDraftNumber(value: number): void {\n    this.draftNumbers.add(value);\n  }\n\n  removeDraftNumber(value: number): void {\n    this.draftNumbers.delete(value);\n  }\n\n  fillNumber(value: number): void {\n    assertCellValueInRange(value);\n    this.value = value;\n    this.draftNumbers.clear();\n    this.state = ResolvingCellState.RESOLVED;\n  }\n\n  toString(): string {\n    return `${this.coordinate} state: ${this.state}, possibleValues: ${this.draftNumbers}`;\n  }\n}\n\nexport class GenericBoard<T extends Cell> {\n  readonly cells: Array<T>;\n\n  constructor(cells: Array<T>) {\n    for (let i = 0; i < CELLS_NUMBER; i++) {\n      if (cells[i].coordinate.linearIndex !== i) {\n        throw new Error(`Invalid cell ${cells[i]}`);\n      }\n    }\n    this.cells = cells;\n  }\n\n  static createBoardFromString(chars: string): GenericBoard<Cell> {\n    // Drop all empty chars.\n    chars = chars.replace(/\\s/g, '');\n    if (chars.length !== CELLS_NUMBER) {\n      throw new Error(\n        `Input char length ${chars.length}, want ${CELLS_NUMBER}`,\n      );\n    }\n\n    const cells = new Array<Cell>();\n    for (let i = 0; i < CELLS_NUMBER; i++) {\n      cells.push(Cell.fromChar(Coordinates.fromLinearIndex(i), chars[i]));\n    }\n\n    return new GenericBoard(cells);\n  }\n\n  printBoard(): string {\n    let ret = '';\n    for (let i = 0; i < CELLS_NUMBER; i++) {\n      ret += this.cells[i].toChar();\n      if (i % MAX_NUMBER === MAX_NUMBER - 1) {\n        ret += '\\n';\n      }\n    }\n    return ret;\n  }\n\n  getCellByCoord(coord: Coordinates): T {\n    return this.cells[coord.linearIndex];\n  }\n\n  getCellsByRow(rowIndex: number): ReadonlyArray<T> {\n    assertIndexInRange(rowIndex, 'rowIndex');\n    const ret = new Array<T>();\n    for (let i = 0; i < MAX_NUMBER; i++) {\n      ret.push(this.cells[rowIndex * MAX_NUMBER + i]);\n    }\n    return ret;\n  }\n\n  getCellsByColumn(columnIndex: number): ReadonlyArray<T> {\n    assertIndexInRange(columnIndex, 'columnIndex');\n    const ret = new Array<T>();\n    for (let i = 0; i < MAX_NUMBER; i++) {\n      ret.push(this.cells[i * MAX_NUMBER + columnIndex]);\n    }\n    return ret;\n  }\n\n  getCellsBySquare(squareIndex: number): ReadonlyArray<T> {\n    assertIndexInRange(squareIndex, 'squareIndex');\n    return this.cells.filter(\n      cell => cell.coordinate.squareIndex === squareIndex,\n    );\n  }\n\n  getCellsByNeighborToCoord(coord: Coordinates): ReadonlyArray<T> {\n    return mergeCellLists([\n      this.getCellsByColumn(coord.x),\n      this.getCellsByRow(coord.y),\n      this.getCellsBySquare(coord.squareIndex),\n    ]);\n  }\n\n  validate(strict: boolean): boolean {\n    for (let i = 0; i < MAX_NUMBER; i++) {\n      if (!validateCells(this.getCellsByRow(i), strict)) return false;\n      if (!validateCells(this.getCellsByColumn(i), strict)) return false;\n      if (!validateCells(this.getCellsBySquare(i), strict)) return false;\n    }\n    return true;\n  }\n}\n\nexport function mergeCellLists<T extends Cell>(\n  arrays: ReadonlyArray<ReadonlyArray<T>>,\n): ReadonlyArray<T> {\n  const seen = new Set<Cell>();\n  const merged: T[] = [];\n\n  for (const arr of arrays) {\n    if (arr) {\n      for (const cell of arr) {\n        if (cell) {\n          if (!seen.has(cell)) {\n            seen.add(cell);\n            merged.push(cell);\n          }\n        }\n      }\n    }\n  }\n\n  return merged;\n}\n\nexport type Board = GenericBoard<Cell>;\n","import { BoardUi, MoveDirection } from './board_ui.js';\nfunction secondsToHumanReadable(seconds) {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = Math.floor(seconds % 60);\n    const formattedMinutes = String(minutes).padStart(2, '0');\n    const formattedSeconds = String(remainingSeconds).padStart(2, '0');\n    return `${formattedMinutes}:${formattedSeconds}`;\n}\nfunction keyCodeToDirection(code) {\n    switch (code) {\n        case 'ArrowUp':\n            return MoveDirection.UP;\n        case 'ArrowDown':\n            return MoveDirection.DOWN;\n        case 'ArrowLeft':\n            return MoveDirection.LEFT;\n        case 'ArrowRight':\n            return MoveDirection.RIGHT;\n        default:\n            throw new Error('Unreachable');\n    }\n}\nconst HTML_CONTENT = `\n<div id=\"board-banner\">\n  <span style=\"text-align: left;\">Timer:&nbsp;<span id=\"value-timer\">0:00</span>\n  </span><span style=\"text-align: center;\">Mistakes:&nbsp;<span id=\"value-mistakes\">0</span>&nbsp;\n  </span><span style=\"text-align: right;\">Remaining:&nbsp;<span id=\"value-remaining\">0</span>&nbsp;\n  </span>\n</div>\n<div id=\"board\" style=\"position: relative;\"></div>\n<div id=\"num-keyboard\">\n  <div>\n    <label class=\"switch\">\n      <input type=\"checkbox\" id=\"kb-draft-mode-switch\" checked=\"true\">\n      <span class=\"slider\"></span>\n    </label>\n    <span>Draft mode</span>\n  </div>\n  <div div class=\"keyboard\" id=\"keyboard\"></div>\n</div>`;\nexport class GameController {\n    game;\n    pageDom;\n    boardUi;\n    constructor(game, pageDom) {\n        this.game = game;\n        this.pageDom = pageDom;\n        // Update internal html.\n        this.pageDom.setHTMLUnsafe(HTML_CONTENT);\n        const boardDom = document.getElementById('board');\n        const keyboardDom = document.getElementById('num-keyboard');\n        this.boardUi = new BoardUi(boardDom, game.puzzleBoard, keyboardDom, this.handleVirtualKeyboardClickEvent.bind(this), {\n            size: boardDom.clientWidth,\n            highlightCursorNeighbors: true,\n            highlightNumber: true,\n            highlightNumberNeighbors: true,\n        });\n        this.refreshBanner();\n    }\n    handleKeyDownEvent(ev) {\n        console.log(ev);\n        switch (ev.code) {\n            case 'ArrowUp':\n            case 'ArrowDown':\n            case 'ArrowLeft':\n            case 'ArrowRight':\n                this.boardUi.moveCursor(keyCodeToDirection(ev.code));\n                return true;\n            case 'Digit1':\n            case 'Digit2':\n            case 'Digit3':\n            case 'Digit4':\n            case 'Digit5':\n            case 'Digit6':\n            case 'Digit7':\n            case 'Digit8':\n            case 'Digit9':\n                this.handleDigitKeyEvent(ev);\n                return true;\n            case 'KeyD':\n                this.game.recalculateDraftNumbers();\n                this.boardUi.updateBoard();\n                return true;\n            default:\n                // Do nothing now.\n                return false;\n        }\n    }\n    handleDigitKeyEvent(ev) {\n        const value = parseInt(ev.code.charAt(5));\n        if (this.boardUi.cursorCoord !== null) {\n            this.handleVirtualKeyboardClickEvent(value, !ev.shiftKey);\n        }\n    }\n    handleVirtualKeyboardClickEvent(value, draftMode) {\n        if (this.boardUi.cursorCoord === null) {\n            return;\n        }\n        console.log('hit %d', value);\n        if (!draftMode) {\n            this.game.fillInNumber(this.boardUi.cursorCoord, value);\n        }\n        else {\n            this.game.toggleDraftNumber(this.boardUi.cursorCoord, value);\n        }\n        this.boardUi.updateBoard();\n        this.refreshBanner(true);\n    }\n    refreshBanner(once = false) {\n        const timerDom = document.getElementById('value-timer');\n        const mistakesDom = document.getElementById('value-mistakes');\n        const remainingDom = document.getElementById('value-remaining');\n        timerDom.textContent = `${secondsToHumanReadable(this.game.getElapsedSeconds())}`;\n        mistakesDom.textContent = `${this.game.mistakes}`;\n        remainingDom.textContent = `${this.game.getEmptyCellsCount()}`;\n        // TODO: Add stop condition.\n        if (!once) {\n            setTimeout(() => {\n                this.refreshBanner();\n            }, 1000);\n        }\n    }\n}\n//# sourceMappingURL=game_controller.js.map","import {BoardUi, MoveDirection} from './board_ui.js';\nimport {Game} from './game.js';\n\nfunction secondsToHumanReadable(seconds: number): string {\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = Math.floor(seconds % 60);\n  const formattedMinutes = String(minutes).padStart(2, '0');\n  const formattedSeconds = String(remainingSeconds).padStart(2, '0');\n  return `${formattedMinutes}:${formattedSeconds}`;\n}\n\nfunction keyCodeToDirection(code: string): MoveDirection {\n  switch (code) {\n    case 'ArrowUp':\n      return MoveDirection.UP;\n    case 'ArrowDown':\n      return MoveDirection.DOWN;\n    case 'ArrowLeft':\n      return MoveDirection.LEFT;\n    case 'ArrowRight':\n      return MoveDirection.RIGHT;\n    default:\n      throw new Error('Unreachable');\n  }\n}\n\nconst HTML_CONTENT = `\n<div id=\"board-banner\">\n  <span style=\"text-align: left;\">Timer:&nbsp;<span id=\"value-timer\">0:00</span>\n  </span><span style=\"text-align: center;\">Mistakes:&nbsp;<span id=\"value-mistakes\">0</span>&nbsp;\n  </span><span style=\"text-align: right;\">Remaining:&nbsp;<span id=\"value-remaining\">0</span>&nbsp;\n  </span>\n</div>\n<div id=\"board\" style=\"position: relative;\"></div>\n<div id=\"num-keyboard\">\n  <div>\n    <label class=\"switch\">\n      <input type=\"checkbox\" id=\"kb-draft-mode-switch\" checked=\"true\">\n      <span class=\"slider\"></span>\n    </label>\n    <span>Draft mode</span>\n  </div>\n  <div div class=\"keyboard\" id=\"keyboard\"></div>\n</div>`;\n\nexport class GameController {\n  game: Game;\n  pageDom: HTMLElement;\n  boardUi: BoardUi;\n\n  constructor(game: Game, pageDom: HTMLElement) {\n    this.game = game;\n    this.pageDom = pageDom;\n\n    // Update internal html.\n    this.pageDom.setHTMLUnsafe(HTML_CONTENT);\n\n    const boardDom = document.getElementById('board')!;\n    const keyboardDom = document.getElementById('num-keyboard')!;\n    this.boardUi = new BoardUi(\n      boardDom,\n      game.puzzleBoard,\n      keyboardDom,\n      this.handleVirtualKeyboardClickEvent.bind(this),\n      {\n        size: boardDom.clientWidth,\n        highlightCursorNeighbors: true,\n        highlightNumber: true,\n        highlightNumberNeighbors: true,\n      },\n    );\n\n    this.refreshBanner();\n  }\n\n  handleKeyDownEvent(ev: KeyboardEvent): boolean {\n    console.log(ev);\n    switch (ev.code) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n        this.boardUi.moveCursor(keyCodeToDirection(ev.code));\n        return true;\n      case 'Digit1':\n      case 'Digit2':\n      case 'Digit3':\n      case 'Digit4':\n      case 'Digit5':\n      case 'Digit6':\n      case 'Digit7':\n      case 'Digit8':\n      case 'Digit9':\n        this.handleDigitKeyEvent(ev);\n        return true;\n      case 'KeyD':\n        this.game.recalculateDraftNumbers();\n        this.boardUi.updateBoard();\n        return true;\n      default:\n        // Do nothing now.\n        return false;\n    }\n  }\n\n  private handleDigitKeyEvent(ev: KeyboardEvent) {\n    const value = parseInt(ev.code.charAt(5));\n    if (this.boardUi.cursorCoord !== null) {\n      this.handleVirtualKeyboardClickEvent(value, !ev.shiftKey);\n    }\n  }\n\n  private handleVirtualKeyboardClickEvent(value: number, draftMode: boolean) {\n    if (this.boardUi.cursorCoord === null) {\n      return;\n    }\n    console.log('hit %d', value);\n    if (!draftMode) {\n      this.game.fillInNumber(this.boardUi.cursorCoord, value);\n    } else {\n      this.game.toggleDraftNumber(this.boardUi.cursorCoord, value);\n    }\n    this.boardUi.updateBoard();\n    this.refreshBanner(true);\n  }\n\n  private refreshBanner(once = false) {\n    const timerDom = document.getElementById('value-timer')!;\n    const mistakesDom = document.getElementById('value-mistakes')!;\n    const remainingDom = document.getElementById('value-remaining')!;\n\n    timerDom.textContent = `${secondsToHumanReadable(this.game.getElapsedSeconds())}`;\n    mistakesDom.textContent = `${this.game.mistakes}`;\n    remainingDom.textContent = `${this.game.getEmptyCellsCount()}`;\n\n    // TODO: Add stop condition.\n    if (!once) {\n      setTimeout(() => {\n        this.refreshBanner();\n      }, 1000);\n    }\n  }\n}\n","import { Coordinates, mergeCellLists, ResolvingCellState, } from './types.js';\nimport * as theme from './theme.js';\nfunction drawLine(ctx, x1, y1, x2, y2, style) {\n    ctx.strokeStyle = style.color;\n    ctx.lineWidth = style.width ? style.width : 1;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n}\nfunction getCanvas2DContext(canvas) {\n    return canvas.getContext('2d');\n}\nfunction clearCanvas(canvas) {\n    const ctx = getCanvas2DContext(canvas);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n}\nexport var MoveDirection;\n(function (MoveDirection) {\n    MoveDirection[MoveDirection[\"UP\"] = 0] = \"UP\";\n    MoveDirection[MoveDirection[\"DOWN\"] = 1] = \"DOWN\";\n    MoveDirection[MoveDirection[\"RIGHT\"] = 2] = \"RIGHT\";\n    MoveDirection[MoveDirection[\"LEFT\"] = 3] = \"LEFT\";\n})(MoveDirection || (MoveDirection = {}));\nconst CANVAS_MARGIN = 5;\nconst VIRTUAL_KB_HTML = `\n<div>\n  <label class=\"switch\">\n    <input type=\"checkbox\" id=\"kb-draft-mode-switch\" checked=\"true\">\n    <span class=\"slider\"></span>\n  </label>\n  <span>Draft mode</span>\n</div>\n<div div class=\"keyboard\" id=\"keyboard\"></div>\n`;\nclass VirtualKeyboard {\n    cb;\n    container;\n    width;\n    height;\n    constructor(container, keyInputCallback) {\n        this.container = container;\n        container.setHTMLUnsafe(VIRTUAL_KB_HTML);\n        this.cb = keyInputCallback;\n        const keyboard = document.getElementById('keyboard');\n        const keyboardDraftModeSwitch = document.getElementById('kb-draft-mode-switch');\n        for (let i = 1; i <= 9; i++) {\n            const key = document.createElement('div');\n            key.classList.add('key');\n            key.textContent = `${i}`;\n            key.addEventListener('click', ev => {\n                ev.preventDefault();\n                this.cb(i, keyboardDraftModeSwitch.checked);\n            });\n            keyboard.appendChild(key);\n        }\n        this.width = this.container.clientWidth;\n        this.height = this.container.clientHeight;\n        this.hide();\n    }\n    show(boardUi, coord) {\n        const w = this.width;\n        const h = this.height;\n        const x1 = boardUi.getCanvasPosForIdx(coord.x);\n        const x2 = boardUi.getCanvasPosForIdx(coord.x + 1);\n        const y1 = boardUi.getCanvasPosForIdx(coord.y);\n        const MARGIN = 3;\n        const x = (x1 - w - MARGIN > 0) ? (x1 - w - MARGIN) : (x2 + MARGIN);\n        const y = (y1 + h < boardUi.config.size) ? (y1 + 40) : (boardUi.config.size - h);\n        this.container.style.left = `${x}px`;\n        this.container.style.top = `${y}px`;\n        this.container.style.display = 'block';\n        console.log('display virtual keyboard at (%d, %d)', x, y);\n    }\n    hide(animation = false) {\n        console.log('hide virtual keyboard');\n        this.container.style.display = 'none';\n    }\n}\nexport class BoardUi {\n    config;\n    container;\n    gameBoard;\n    virtualKeyboard;\n    gridCanvas;\n    neighHighlightCanvas;\n    numberHighlightCanvas;\n    // The canvas layer for displaying numbers.\n    numbersCanvas;\n    // The canvas layer for displaying cursor.\n    cursorCanvas;\n    // The canvas layer for handling mouse event.\n    clickCanvas;\n    cursorCoord = null;\n    focusedNumber = null;\n    constructor(container, gameBoard, virtualKeyboardContainer, digitInputCallback, config) {\n        this.container = container;\n        this.gameBoard = gameBoard;\n        this.virtualKeyboard = new VirtualKeyboard(virtualKeyboardContainer, (v, b) => {\n            // Do not hide in draft mode.\n            if (!b) {\n                this.virtualKeyboard.hide();\n            }\n            digitInputCallback(v, b);\n        });\n        this.updateConfig(config);\n    }\n    getTheme() {\n        return theme.getCurrentTheme();\n    }\n    getCellSize() {\n        return (this.config.size - CANVAS_MARGIN * 2) / 9;\n    }\n    getCanvasPosForIdx(index) {\n        return CANVAS_MARGIN + this.getCellSize() * index;\n    }\n    getIdxForCanvasPos(pos) {\n        for (let i = 0; i < 9; ++i) {\n            if (pos < this.getCanvasPosForIdx(i + 1) &&\n                pos > this.getCanvasPosForIdx(i)) {\n                return i;\n            }\n        }\n        return null;\n    }\n    updateBoard() {\n        this.redrawNumbers();\n        this.redrawHighlight();\n    }\n    updateConfig(config) {\n        this.config = config;\n        // Remove all children at first.\n        while (this.container.firstChild) {\n            this.container.removeChild(this.container.firstChild);\n        }\n        this.numberHighlightCanvas = this.createCanvas(1);\n        this.neighHighlightCanvas = this.createCanvas(2);\n        this.gridCanvas = this.createCanvas(3);\n        this.numbersCanvas = this.createCanvas(4);\n        this.cursorCanvas = this.createCanvas(5);\n        this.clickCanvas = this.createCanvas(6);\n        this.redrawGrid();\n        this.redrawNumbers();\n        this.clickCanvas.addEventListener('click', (ev) => {\n            this.virtualKeyboard.hide();\n            const rect = this.clickCanvas.getBoundingClientRect();\n            const x = this.getIdxForCanvasPos(ev.clientX - rect.left);\n            const y = this.getIdxForCanvasPos(ev.clientY - rect.top);\n            // Reset cursor if the click is out of bound.\n            if (x === null || y === null) {\n                this.updateCursor(null);\n            }\n            else {\n                const coord = new Coordinates(x, y);\n                this.updateCursor(coord);\n                // If the cell is empty, show keyboard.\n                if (this.gameBoard.getCellByCoord(coord).value === null) {\n                    this.virtualKeyboard.show(this, coord);\n                }\n            }\n        });\n        this.clickCanvas.addEventListener('dblclick', (ev) => {\n            const rect = this.clickCanvas.getBoundingClientRect();\n            const x = this.getIdxForCanvasPos(ev.clientX - rect.left);\n            const y = this.getIdxForCanvasPos(ev.clientY - rect.top);\n            // Reset cursor if the click is out of bound.\n            if (x === null || y === null) {\n                this.updateFocusedNumber(null);\n            }\n            else {\n                const cell = this.gameBoard.getCellByCoord(new Coordinates(x, y));\n                // Allow double click to cancel selection.\n                this.updateFocusedNumber(cell.value === this.focusedNumber ? null : cell.value);\n            }\n        });\n    }\n    updateCursor(coord) {\n        console.log('Set cursor to %s', coord);\n        // TODO: If the pos did not change, we can skip the following logic.\n        this.cursorCoord = coord;\n        this.redrawCursor();\n        this.redrawHighlight();\n    }\n    moveCursor(d) {\n        if (!this.cursorCoord)\n            return;\n        let x = this.cursorCoord.x;\n        let y = this.cursorCoord.y;\n        switch (d) {\n            case MoveDirection.UP:\n                y -= 1;\n                break;\n            case MoveDirection.DOWN:\n                y += 1;\n                break;\n            case MoveDirection.LEFT:\n                x -= 1;\n                break;\n            case MoveDirection.RIGHT:\n                x += 1;\n                break;\n        }\n        if (x < 9 && x >= 0 && y < 9 && y >= 0) {\n            this.updateCursor(new Coordinates(x, y));\n        }\n    }\n    updateFocusedNumber(value) {\n        this.focusedNumber = value;\n        this.redrawHighlight();\n        this.redrawNumbers();\n    }\n    createCanvas(zIndex) {\n        const canvas = document.createElement('canvas');\n        canvas.width = this.config.size;\n        canvas.height = this.config.size;\n        canvas.style.position = 'absolute';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        canvas.style.zIndex = `${zIndex}`;\n        this.container.appendChild(canvas);\n        return canvas;\n    }\n    redrawHighlight() {\n        clearCanvas(this.neighHighlightCanvas);\n        clearCanvas(this.numberHighlightCanvas);\n        const highlightCell = (ctx, coord, color) => {\n            const x = this.getCanvasPosForIdx(coord.x);\n            const y = this.getCanvasPosForIdx(coord.y);\n            ctx.fillStyle = color;\n            ctx.fillRect(x, y, this.getCellSize(), this.getCellSize());\n        };\n        const highlightDraftCell = (ctx, coord, value, color) => {\n            const boxSize = this.getCellSize() / 3;\n            const x = this.getCanvasPosForIdx(coord.x) +\n                Math.floor((value - 1) % 3) * boxSize;\n            const y = this.getCanvasPosForIdx(coord.y) +\n                Math.floor((value - 1) / 3) * boxSize;\n            ctx.fillStyle = color;\n            ctx.fillRect(x, y, boxSize, boxSize);\n        };\n        const cursor = this.cursorCoord;\n        if (cursor && this.config.highlightCursorNeighbors) {\n            const ctx = getCanvas2DContext(this.neighHighlightCanvas);\n            const cells = this.gameBoard.getCellsByNeighborToCoord(cursor);\n            for (const cell of cells) {\n                highlightCell(ctx, cell.coordinate, this.getTheme().color_highlight_bg1);\n            }\n        }\n        if (this.focusedNumber !== null &&\n            (this.config.highlightNumberNeighbors || this.config.highlightNumber)) {\n            const ctx = getCanvas2DContext(this.numberHighlightCanvas);\n            const numberCells = this.gameBoard.cells.filter((c) => {\n                return c.value === this.focusedNumber;\n            });\n            let cells = numberCells.slice();\n            if (this.config.highlightNumberNeighbors) {\n                const cellArrays = numberCells.map((c) => {\n                    return this.gameBoard.getCellsByNeighborToCoord(c.coordinate);\n                });\n                cells = mergeCellLists(cellArrays);\n            }\n            for (const cell of cells) {\n                highlightCell(ctx, cell.coordinate, this.getTheme().color_highlight_bg2);\n            }\n            // Also highlight all draft values.\n            for (const cell of this.gameBoard.cells) {\n                if (cell.hasDraftNumber(this.focusedNumber)) {\n                    highlightDraftCell(ctx, cell.coordinate, this.focusedNumber, this.getTheme().color_highlight_bg2);\n                }\n            }\n        }\n    }\n    redrawGrid() {\n        const ctx = this.gridCanvas.getContext('2d');\n        if (!ctx) {\n            console.error('Context not available');\n            return;\n        }\n        const startPos = this.getCanvasPosForIdx(0);\n        const endPos = this.getCanvasPosForIdx(9);\n        const style = { color: this.getTheme().color_prefilled };\n        const sqrBorderStyle = {\n            color: this.getTheme().color_prefilled,\n            width: 3,\n        };\n        for (let i = 0; i <= 9; i++) {\n            const pos = this.getCanvasPosForIdx(i);\n            drawLine(ctx, startPos, pos, endPos, pos, i % 3 ? style : sqrBorderStyle);\n            drawLine(ctx, pos, startPos, pos, endPos, i % 3 ? style : sqrBorderStyle);\n        }\n    }\n    redrawNumbers() {\n        if (!this.gameBoard) {\n            return;\n        }\n        const ctx = this.numbersCanvas.getContext('2d');\n        if (!ctx) {\n            console.error('Context not available');\n            return;\n        }\n        clearCanvas(this.numbersCanvas);\n        const drawNumber = (val, coord, small, color) => {\n            const boxSize = this.getCellSize() / (small ? 3 : 1);\n            const fontSize = boxSize * 0.8;\n            let x = this.getCanvasPosForIdx(coord.x) + boxSize / 2;\n            let y = this.getCanvasPosForIdx(coord.y) + boxSize / 2 + fontSize * 0.07;\n            if (small) {\n                x += Math.floor((val - 1) % 3) * boxSize;\n                y += Math.floor((val - 1) / 3) * boxSize;\n            }\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.font = `${fontSize}px monospace`;\n            ctx.fillStyle = color;\n            ctx.fillText(val.toString(), x, y);\n        };\n        for (const cell of this.gameBoard.cells) {\n            if (cell.state === ResolvingCellState.PREFILLED) {\n                drawNumber(cell.value, cell.coordinate, false, this.getTheme().color_prefilled);\n            }\n            if (cell.state === ResolvingCellState.RESOLVED) {\n                drawNumber(cell.value, cell.coordinate, false, this.getTheme().color_resolved);\n            }\n            if (cell.state === ResolvingCellState.RESOLVING) {\n                for (let i = 1; i <= 9; ++i) {\n                    if (cell.draftNumbers.has(i)) {\n                        drawNumber(i, cell.coordinate, true, this.getTheme().color_draft);\n                    }\n                }\n            }\n        }\n    }\n    redrawCursor() {\n        const ctx = getCanvas2DContext(this.cursorCanvas);\n        // Clear the current drawing at first.\n        clearCanvas(this.cursorCanvas);\n        const coord = this.cursorCoord;\n        if (coord === null)\n            return;\n        // Redraw cursor box.\n        const x1 = this.getCanvasPosForIdx(coord.x);\n        const x2 = this.getCanvasPosForIdx(coord.x + 1);\n        const y1 = this.getCanvasPosForIdx(coord.y);\n        const y2 = this.getCanvasPosForIdx(coord.y + 1);\n        const style = {\n            color: this.getTheme().color_highlight_foreground,\n            width: 3,\n        };\n        drawLine(ctx, x1, y1, x2, y1, style);\n        drawLine(ctx, x1, y2, x2, y2, style);\n        drawLine(ctx, x1, y1, x1, y2, style);\n        drawLine(ctx, x2, y1, x2, y2, style);\n    }\n}\n//# sourceMappingURL=board_ui.js.map","import {\n  Cell,\n  Coordinates,\n  mergeCellLists,\n  ResolvingCellState,\n} from './types.js';\nimport {ResolvingBoard} from './resolve.js';\nimport * as theme from './theme.js';\n\ninterface LineStyle {\n  color: string;\n  width?: number;\n}\n\nfunction drawLine(\n  ctx: CanvasRenderingContext2D,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  style: LineStyle,\n): void {\n  ctx.strokeStyle = style.color;\n  ctx.lineWidth = style.width ? style.width : 1;\n  ctx.beginPath();\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n  ctx.stroke();\n}\n\nfunction getCanvas2DContext(\n  canvas: HTMLCanvasElement,\n): CanvasRenderingContext2D {\n  return canvas.getContext('2d')!;\n}\n\nfunction clearCanvas(canvas: HTMLCanvasElement) {\n  const ctx = getCanvas2DContext(canvas);\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n}\n\nexport enum MoveDirection {\n  UP,\n  DOWN,\n  RIGHT,\n  LEFT,\n}\n\nconst CANVAS_MARGIN = 5;\n\nexport interface Config {\n  // Size of the canvas.\n  size: number;\n\n  // Highlight the neighbors of the focused cell.\n  highlightCursorNeighbors: boolean;\n\n  // Highlight the cells containing the focused number.\n  highlightNumber: boolean;\n\n  // Highlight the all neighbors of the focused number.\n  highlightNumberNeighbors: boolean;\n}\n\nconst VIRTUAL_KB_HTML = `\n<div>\n  <label class=\"switch\">\n    <input type=\"checkbox\" id=\"kb-draft-mode-switch\" checked=\"true\">\n    <span class=\"slider\"></span>\n  </label>\n  <span>Draft mode</span>\n</div>\n<div div class=\"keyboard\" id=\"keyboard\"></div>\n`;\n\ntype KeyInputCallback = (value: number, draftMode: boolean) => void;\nclass VirtualKeyboard {\n  private readonly cb: KeyInputCallback;\n  private readonly container: HTMLElement;\n\n  private width: number;\n  private height: number;\n\n  constructor(container: HTMLElement, keyInputCallback: KeyInputCallback) {\n    this.container = container;\n    container.setHTMLUnsafe(VIRTUAL_KB_HTML);\n    this.cb = keyInputCallback;\n\n    const keyboard = document.getElementById('keyboard')!;\n    const keyboardDraftModeSwitch = document.getElementById(\n      'kb-draft-mode-switch',\n    ) as HTMLInputElement;\n    for (let i = 1; i <= 9; i++) {\n      const key = document.createElement('div');\n      key.classList.add('key');\n      key.textContent = `${i}`;\n      key.addEventListener('click', ev => {\n        ev.preventDefault();\n        this.cb(i, keyboardDraftModeSwitch.checked);\n      });\n      keyboard.appendChild(key);\n    }\n\n\n    this.width = this.container.clientWidth;\n    this.height = this.container.clientHeight;\n\n    this.hide();\n  }\n\n  show(boardUi: BoardUi, coord: Coordinates) {\n    const w = this.width;\n    const h = this.height;\n\n    const x1 = boardUi.getCanvasPosForIdx(coord.x);\n    const x2 = boardUi.getCanvasPosForIdx(coord.x + 1);\n    const y1 = boardUi.getCanvasPosForIdx(coord.y);\n\n    const MARGIN = 3;\n\n    const x = (x1 - w - MARGIN > 0) ? (x1 - w - MARGIN) : (x2 + MARGIN);\n    const y = (y1 + h < boardUi.config.size) ? (y1 + 40) : (boardUi.config.size - h);\n\n    this.container.style.left = `${x}px`;\n    this.container.style.top = `${y}px`;\n\n    this.container.style.display = 'block';\n\n    console.log('display virtual keyboard at (%d, %d)', x, y);\n  }\n\n  hide(animation = false) {\n    console.log('hide virtual keyboard');\n    this.container.style.display = 'none';\n  }\n}\n\nexport class BoardUi {\n  config!: Config;\n  private readonly container: HTMLElement;\n\n  private gameBoard: ResolvingBoard;\n\n  private readonly virtualKeyboard: VirtualKeyboard;\n\n  private gridCanvas!: HTMLCanvasElement;\n  private neighHighlightCanvas!: HTMLCanvasElement;\n  private numberHighlightCanvas!: HTMLCanvasElement;\n  // The canvas layer for displaying numbers.\n  private numbersCanvas!: HTMLCanvasElement;\n  // The canvas layer for displaying cursor.\n  private cursorCanvas!: HTMLCanvasElement;\n  // The canvas layer for handling mouse event.\n  private clickCanvas!: HTMLCanvasElement;\n\n  cursorCoord: Coordinates | null = null;\n\n  focusedNumber: number | null = null;\n\n  constructor(\n    container: HTMLElement,\n    gameBoard: ResolvingBoard,\n    virtualKeyboardContainer: HTMLElement,\n    digitInputCallback: KeyInputCallback,\n    config: Config,\n  ) {\n    this.container = container;\n    this.gameBoard = gameBoard;\n    this.virtualKeyboard = new VirtualKeyboard(\n      virtualKeyboardContainer,\n      (v, b) => {\n        // Do not hide in draft mode.\n        if (!b) {\n          this.virtualKeyboard.hide();\n        }\n        digitInputCallback(v, b);\n      },\n    );\n    this.updateConfig(config);\n  }\n\n  private getTheme(): theme.Theme {\n    return theme.getCurrentTheme();\n  }\n\n  private getCellSize(): number {\n    return (this.config.size - CANVAS_MARGIN * 2) / 9;\n  }\n\n  getCanvasPosForIdx(index: number): number {\n    return CANVAS_MARGIN + this.getCellSize() * index;\n  }\n\n  private getIdxForCanvasPos(pos: number): number | null {\n    for (let i = 0; i < 9; ++i) {\n      if (\n        pos < this.getCanvasPosForIdx(i + 1) &&\n        pos > this.getCanvasPosForIdx(i)\n      ) {\n        return i;\n      }\n    }\n    return null;\n  }\n\n  updateBoard(): void {\n    this.redrawNumbers();\n    this.redrawHighlight();\n  }\n\n  updateConfig(config: Config): void {\n    this.config = config;\n\n    // Remove all children at first.\n    while (this.container.firstChild) {\n      this.container.removeChild(this.container.firstChild);\n    }\n\n    this.numberHighlightCanvas = this.createCanvas(1);\n    this.neighHighlightCanvas = this.createCanvas(2);\n    this.gridCanvas = this.createCanvas(3);\n    this.numbersCanvas = this.createCanvas(4);\n    this.cursorCanvas = this.createCanvas(5);\n    this.clickCanvas = this.createCanvas(6);\n\n    this.redrawGrid();\n    this.redrawNumbers();\n    this.clickCanvas.addEventListener('click', (ev: MouseEvent) => {\n      this.virtualKeyboard.hide();\n      const rect = this.clickCanvas.getBoundingClientRect();\n      const x = this.getIdxForCanvasPos(ev.clientX - rect.left);\n      const y = this.getIdxForCanvasPos(ev.clientY - rect.top);\n      // Reset cursor if the click is out of bound.\n      if (x === null || y === null) {\n        this.updateCursor(null);\n      } else {\n        const coord = new Coordinates(x, y);\n        this.updateCursor(coord);\n\n        // If the cell is empty, show keyboard.\n        if (this.gameBoard.getCellByCoord(coord).value === null) {\n          this.virtualKeyboard.show(this, coord);\n        }\n      }\n    });\n    this.clickCanvas.addEventListener('dblclick', (ev: MouseEvent) => {\n      const rect = this.clickCanvas.getBoundingClientRect();\n      const x = this.getIdxForCanvasPos(ev.clientX - rect.left);\n      const y = this.getIdxForCanvasPos(ev.clientY - rect.top);\n      // Reset cursor if the click is out of bound.\n      if (x === null || y === null) {\n        this.updateFocusedNumber(null);\n      } else {\n        const cell = this.gameBoard.getCellByCoord(new Coordinates(x, y));\n        // Allow double click to cancel selection.\n        this.updateFocusedNumber(\n          cell.value === this.focusedNumber ? null : cell.value,\n        );\n      }\n    });\n  }\n\n  updateCursor(coord: Coordinates | null): void {\n    console.log('Set cursor to %s', coord);\n\n    // TODO: If the pos did not change, we can skip the following logic.\n    this.cursorCoord = coord;\n    this.redrawCursor();\n    this.redrawHighlight();\n  }\n\n  moveCursor(d: MoveDirection) {\n    if (!this.cursorCoord) return;\n    let x = this.cursorCoord.x;\n    let y = this.cursorCoord.y;\n    switch (d) {\n      case MoveDirection.UP:\n        y -= 1;\n        break;\n      case MoveDirection.DOWN:\n        y += 1;\n        break;\n      case MoveDirection.LEFT:\n        x -= 1;\n        break;\n      case MoveDirection.RIGHT:\n        x += 1;\n        break;\n    }\n    if (x < 9 && x >= 0 && y < 9 && y >= 0) {\n      this.updateCursor(new Coordinates(x, y));\n    }\n  }\n\n  updateFocusedNumber(value: number | null) {\n    this.focusedNumber = value;\n    this.redrawHighlight();\n    this.redrawNumbers();\n  }\n\n  private createCanvas(zIndex: number): HTMLCanvasElement {\n    const canvas = document.createElement('canvas');\n    canvas.width = this.config.size;\n    canvas.height = this.config.size;\n    canvas.style.position = 'absolute';\n    canvas.style.left = '0';\n    canvas.style.top = '0';\n    canvas.style.zIndex = `${zIndex}`;\n    this.container.appendChild(canvas);\n    return canvas;\n  }\n\n  private redrawHighlight(): void {\n    clearCanvas(this.neighHighlightCanvas);\n    clearCanvas(this.numberHighlightCanvas);\n\n    const highlightCell = (\n      ctx: CanvasRenderingContext2D,\n      coord: Coordinates,\n      color: string,\n    ) => {\n      const x = this.getCanvasPosForIdx(coord.x);\n      const y = this.getCanvasPosForIdx(coord.y);\n      ctx.fillStyle = color;\n      ctx.fillRect(x, y, this.getCellSize(), this.getCellSize());\n    };\n\n    const highlightDraftCell = (\n      ctx: CanvasRenderingContext2D,\n      coord: Coordinates,\n      value: number,\n      color: string,\n    ) => {\n      const boxSize = this.getCellSize() / 3;\n      const x =\n        this.getCanvasPosForIdx(coord.x) +\n        Math.floor((value - 1) % 3) * boxSize;\n      const y =\n        this.getCanvasPosForIdx(coord.y) +\n        Math.floor((value - 1) / 3) * boxSize;\n      ctx.fillStyle = color;\n      ctx.fillRect(x, y, boxSize, boxSize);\n    };\n\n    const cursor = this.cursorCoord;\n    if (cursor && this.config.highlightCursorNeighbors) {\n      const ctx = getCanvas2DContext(this.neighHighlightCanvas);\n      const cells = this.gameBoard.getCellsByNeighborToCoord(cursor);\n      for (const cell of cells) {\n        highlightCell(\n          ctx,\n          cell.coordinate,\n          this.getTheme().color_highlight_bg1,\n        );\n      }\n    }\n\n    if (\n      this.focusedNumber !== null &&\n      (this.config.highlightNumberNeighbors || this.config.highlightNumber)\n    ) {\n      const ctx = getCanvas2DContext(this.numberHighlightCanvas);\n      const numberCells = this.gameBoard.cells.filter((c: Cell) => {\n        return c.value === this.focusedNumber;\n      });\n      let cells: ReadonlyArray<Cell> = numberCells.slice();\n      if (this.config.highlightNumberNeighbors) {\n        const cellArrays = numberCells.map((c: Cell) => {\n          return this.gameBoard.getCellsByNeighborToCoord(c.coordinate);\n        });\n        cells = mergeCellLists(cellArrays);\n      }\n      for (const cell of cells) {\n        highlightCell(\n          ctx,\n          cell.coordinate,\n          this.getTheme().color_highlight_bg2,\n        );\n      }\n\n      // Also highlight all draft values.\n      for (const cell of this.gameBoard.cells) {\n        if (cell.hasDraftNumber(this.focusedNumber)) {\n          highlightDraftCell(\n            ctx,\n            cell.coordinate,\n            this.focusedNumber,\n            this.getTheme().color_highlight_bg2,\n          );\n        }\n      }\n    }\n  }\n\n  private redrawGrid(): void {\n    const ctx = this.gridCanvas.getContext('2d');\n    if (!ctx) {\n      console.error('Context not available');\n      return;\n    }\n\n    const startPos = this.getCanvasPosForIdx(0);\n    const endPos = this.getCanvasPosForIdx(9);\n    const style: LineStyle = {color: this.getTheme().color_prefilled};\n    const sqrBorderStyle: LineStyle = {\n      color: this.getTheme().color_prefilled,\n      width: 3,\n    };\n    for (let i = 0; i <= 9; i++) {\n      const pos = this.getCanvasPosForIdx(i);\n      drawLine(ctx, startPos, pos, endPos, pos, i % 3 ? style : sqrBorderStyle);\n      drawLine(ctx, pos, startPos, pos, endPos, i % 3 ? style : sqrBorderStyle);\n    }\n  }\n\n  private redrawNumbers(): void {\n    if (!this.gameBoard) {\n      return;\n    }\n\n    const ctx = this.numbersCanvas.getContext('2d');\n    if (!ctx) {\n      console.error('Context not available');\n      return;\n    }\n\n    clearCanvas(this.numbersCanvas);\n\n    const drawNumber = (\n      val: number,\n      coord: Coordinates,\n      small: boolean,\n      color: string,\n    ) => {\n      const boxSize = this.getCellSize() / (small ? 3 : 1);\n      const fontSize = boxSize * 0.8;\n      let x = this.getCanvasPosForIdx(coord.x) + boxSize / 2;\n      let y = this.getCanvasPosForIdx(coord.y) + boxSize / 2 + fontSize * 0.07;\n      if (small) {\n        x += Math.floor((val - 1) % 3) * boxSize;\n        y += Math.floor((val - 1) / 3) * boxSize;\n      }\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.font = `${fontSize}px monospace`;\n      ctx.fillStyle = color;\n      ctx.fillText(val.toString(), x, y);\n    };\n\n    for (const cell of this.gameBoard.cells) {\n      if (cell.state === ResolvingCellState.PREFILLED) {\n        drawNumber(\n          cell.value!,\n          cell.coordinate,\n          false,\n          this.getTheme().color_prefilled,\n        );\n      }\n      if (cell.state === ResolvingCellState.RESOLVED) {\n        drawNumber(\n          cell.value!,\n          cell.coordinate,\n          false,\n          this.getTheme().color_resolved,\n        );\n      }\n      if (cell.state === ResolvingCellState.RESOLVING) {\n        for (let i = 1; i <= 9; ++i) {\n          if (cell.draftNumbers.has(i)) {\n            drawNumber(i, cell.coordinate, true, this.getTheme().color_draft);\n          }\n        }\n      }\n    }\n  }\n\n  private redrawCursor(): void {\n    const ctx = getCanvas2DContext(this.cursorCanvas);\n\n    // Clear the current drawing at first.\n    clearCanvas(this.cursorCanvas);\n\n    const coord = this.cursorCoord;\n\n    if (coord === null) return;\n\n    // Redraw cursor box.\n    const x1 = this.getCanvasPosForIdx(coord.x);\n    const x2 = this.getCanvasPosForIdx(coord.x + 1);\n    const y1 = this.getCanvasPosForIdx(coord.y);\n    const y2 = this.getCanvasPosForIdx(coord.y + 1);\n    const style: LineStyle = {\n      color: this.getTheme().color_highlight_foreground,\n      width: 3,\n    };\n    drawLine(ctx, x1, y1, x2, y1, style);\n    drawLine(ctx, x1, y2, x2, y2, style);\n    drawLine(ctx, x1, y1, x1, y2, style);\n    drawLine(ctx, x2, y1, x2, y2, style);\n  }\n}\n","import { eliminatePossibleStates, ResolvingBoard } from './resolve.js';\n// Game contains the logic related to one round of game. It's supposed to be independent of UI.\nexport class Game {\n    answerBoard;\n    puzzleBoard;\n    startTime;\n    endTime = null;\n    mistakes = 0;\n    constructor(answer, puzzle) {\n        this.answerBoard = answer;\n        this.puzzleBoard = ResolvingBoard.createFromBoard(puzzle);\n        this.startTime = performance.now();\n    }\n    fillInNumber(coord, value) {\n        const cell = this.puzzleBoard.cells[coord.linearIndex];\n        if (cell.hasNumber()) {\n            console.log('%s already have number', coord);\n            return;\n        }\n        // TODO: This part should be able to be controlled by rules.\n        if (this.answerBoard.cells[coord.linearIndex].value !== value) {\n            alert('Not correct :)');\n            this.mistakes++;\n            return;\n        }\n        cell.fillNumber(value);\n        if (this.isAllCorrect()) {\n            this.endTime = performance.now();\n            alert('Congratulations!!!');\n        }\n    }\n    toggleDraftNumber(coord, value) {\n        const cell = this.puzzleBoard.cells[coord.linearIndex];\n        if (cell.hasNumber()) {\n            console.log('%s already have number', coord);\n            return;\n        }\n        if (cell.hasDraftNumber(value)) {\n            cell.removeDraftNumber(value);\n        }\n        else {\n            cell.addDraftNumber(value);\n        }\n    }\n    recalculateDraftNumbers() {\n        for (const cell of this.puzzleBoard.cells) {\n            if (!cell.hasNumber()) {\n                cell.addAllDraftNumber();\n            }\n        }\n        const actions = eliminatePossibleStates(this.puzzleBoard);\n        this.puzzleBoard.takeActions(actions);\n    }\n    getEmptyCellsCount() {\n        let cnt = 0;\n        for (const cell of this.puzzleBoard.cells) {\n            if (!cell.hasNumber()) {\n                cnt++;\n            }\n        }\n        return cnt;\n    }\n    getElapsedSeconds() {\n        let end = performance.now();\n        if (this.endTime !== null) {\n            end = this.endTime;\n        }\n        return Math.round((end - this.startTime) / 1000);\n    }\n    isAllCorrect() {\n        for (let i = 0; i < 81; ++i) {\n            if (this.puzzleBoard.cells[i].value !== this.answerBoard.cells[i].value) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n//# sourceMappingURL=game.js.map","import {Board, Coordinates} from './types.js';\nimport {eliminatePossibleStates, ResolvingBoard} from './resolve.js';\n\n// Game contains the logic related to one round of game. It's supposed to be independent of UI.\nexport class Game {\n  answerBoard: Board;\n  puzzleBoard: ResolvingBoard;\n  startTime: DOMHighResTimeStamp;\n  endTime: DOMHighResTimeStamp | null = null;\n  mistakes = 0;\n\n  constructor(answer: Board, puzzle: Board) {\n    this.answerBoard = answer;\n    this.puzzleBoard = ResolvingBoard.createFromBoard(puzzle);\n    this.startTime = performance.now();\n  }\n\n  fillInNumber(coord: Coordinates, value: number) {\n    const cell = this.puzzleBoard.cells[coord.linearIndex];\n    if (cell.hasNumber()) {\n      console.log('%s already have number', coord);\n      return;\n    }\n\n    // TODO: This part should be able to be controlled by rules.\n    if (this.answerBoard.cells[coord.linearIndex].value !== value) {\n      alert('Not correct :)');\n      this.mistakes++;\n      return;\n    }\n\n    cell.fillNumber(value);\n\n    if (this.isAllCorrect()) {\n      this.endTime = performance.now();\n      alert('Congratulations!!!');\n    }\n  }\n\n  toggleDraftNumber(coord: Coordinates, value: number) {\n    const cell = this.puzzleBoard.cells[coord.linearIndex];\n    if (cell.hasNumber()) {\n      console.log('%s already have number', coord);\n      return;\n    }\n\n    if (cell.hasDraftNumber(value)) {\n      cell.removeDraftNumber(value);\n    } else {\n      cell.addDraftNumber(value);\n    }\n  }\n\n  recalculateDraftNumbers() {\n    for (const cell of this.puzzleBoard.cells) {\n      if (!cell.hasNumber()) {\n        cell.addAllDraftNumber();\n      }\n    }\n    const actions = eliminatePossibleStates(this.puzzleBoard);\n    this.puzzleBoard.takeActions(actions);\n  }\n\n  getEmptyCellsCount(): number {\n    let cnt = 0;\n    for (const cell of this.puzzleBoard.cells) {\n      if (!cell.hasNumber()) {\n        cnt++;\n      }\n    }\n    return cnt;\n  }\n\n  getElapsedSeconds(): number {\n    let end = performance.now();\n    if (this.endTime !== null) {\n      end = this.endTime;\n    }\n    return Math.round((end - this.startTime) / 1000);\n  }\n\n  private isAllCorrect(): boolean {\n    for (let i = 0; i < 81; ++i) {\n      if (this.puzzleBoard.cells[i].value !== this.answerBoard.cells[i].value) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n","import * as types from './types.js';\nimport { ResolvingCell, CELLS_NUMBER, ResolvingCellState, } from './types.js';\nexport class ResolvingBoard extends types.GenericBoard {\n    static createFromBoard(board) {\n        const cells = new Array();\n        for (const cell of board.cells) {\n            if (cell.value === null) {\n                cells.push(ResolvingCell.newResolving(cell.coordinate));\n            }\n            else {\n                cells.push(ResolvingCell.newPrefilled(cell.coordinate, cell.value));\n            }\n        }\n        return new ResolvingBoard(cells);\n    }\n    getEmptyCellsCount() {\n        return this.cells.filter(cell => cell.state === ResolvingCellState.RESOLVING).length;\n    }\n    takeAction(action) {\n        console.log(actionToString(action));\n        const cell = this.getCellByCoord(action.coordinate);\n        switch (action.type) {\n            case ActionType.REMOVE_DRAFT_NUMBER:\n                // console.log(`before ${cell.possibleValues.toString()}`)\n                cell.removeDraftNumber(action.value);\n                // console.log(`after ${cell.possibleValues.toString()}`)\n                break;\n            case ActionType.FILL_IN_NUMBER:\n                cell.fillNumber(action.value);\n                break;\n        }\n    }\n    takeActions(actions) {\n        for (const action of actions) {\n            this.takeAction(action);\n        }\n    }\n}\nvar ActionType;\n(function (ActionType) {\n    ActionType[\"REMOVE_DRAFT_NUMBER\"] = \"remove draft number\";\n    ActionType[\"FILL_IN_NUMBER\"] = \"fill in number\";\n})(ActionType || (ActionType = {}));\nfunction actionToString(a) {\n    return `${a.coordinate.toString()}: ${a.type} value ${a.value}, reason: ${a.reasonString}`;\n}\nexport function eliminatePossibleStates(board) {\n    const ret = new Array();\n    const addAction = function (targetCell, value, sourceCell) {\n        if (targetCell.state === ResolvingCellState.RESOLVING &&\n            targetCell.draftNumbers.has(value)) {\n            ret.push({\n                coordinate: targetCell.coordinate,\n                type: ActionType.REMOVE_DRAFT_NUMBER,\n                value: value,\n                reasonString: `Conflict with ${sourceCell.toString()}`,\n            });\n        }\n    };\n    for (let i = 0; i < CELLS_NUMBER; i++) {\n        const coord = types.Coordinates.fromLinearIndex(i);\n        const cell = board.cells[i];\n        if (cell.state === ResolvingCellState.RESOLVING) {\n            continue;\n        }\n        if (cell.value === null) {\n            throw new Error('Invalid state');\n        }\n        const valueToRemove = cell.value;\n        for (const targetCell of board.getCellsByColumn(coord.x)) {\n            addAction(targetCell, valueToRemove, cell);\n        }\n        for (const targetCell of board.getCellsByRow(coord.y)) {\n            addAction(targetCell, valueToRemove, cell);\n        }\n        for (const targetCell of board.getCellsBySquare(coord.squareIndex)) {\n            addAction(targetCell, valueToRemove, cell);\n        }\n    }\n    return ret;\n}\nfunction uniqueValueSetter(board) {\n    const ret = new Array();\n    const addAction = function (cell, value) {\n        ret.push({\n            coordinate: cell.coordinate,\n            type: ActionType.FILL_IN_NUMBER,\n            value: value,\n            reasonString: null,\n        });\n    };\n    for (let i = 0; i < CELLS_NUMBER; i++) {\n        const cell = board.cells[i];\n        if (cell.state !== ResolvingCellState.RESOLVING) {\n            continue;\n        }\n        const value = cell.draftNumbers.getUnique();\n        if (value !== null) {\n            addAction(cell, value);\n        }\n    }\n    return ret;\n}\nexport function resolve(board) {\n    const resolvingBoard = ResolvingBoard.createFromBoard(board);\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const resolvers = [\n            { resolve: eliminatePossibleStates },\n            { resolve: uniqueValueSetter },\n        ];\n        const before = resolvingBoard.getEmptyCellsCount();\n        for (const resolver of resolvers) {\n            const actions = resolver.resolve(resolvingBoard);\n            console.log(actions.length);\n            resolvingBoard.takeActions(actions);\n        }\n        const after = resolvingBoard.getEmptyCellsCount();\n        console.log(resolvingBoard.printBoard());\n        if (before === after) {\n            break;\n        }\n    }\n    // console.log(resolvingBoard.printBoard());\n    // for (const cell of resolvingBoard.cells){\n    // console.log(cell.possibleValues.toString());}\n}\n//# sourceMappingURL=resolve.js.map","import * as types from './types.js';\n\nimport {\n  ResolvingCell,\n  CELLS_NUMBER,\n  MAX_NUMBER,\n  ResolvingCellState,\n} from './types.js';\n\nexport class ResolvingBoard extends types.GenericBoard<ResolvingCell> {\n  static createFromBoard(board: Readonly<types.Board>): ResolvingBoard {\n    const cells = new Array<ResolvingCell>();\n    for (const cell of board.cells) {\n      if (cell.value === null) {\n        cells.push(ResolvingCell.newResolving(cell.coordinate));\n      } else {\n        cells.push(ResolvingCell.newPrefilled(cell.coordinate, cell.value));\n      }\n    }\n    return new ResolvingBoard(cells);\n  }\n\n  getEmptyCellsCount(): number {\n    return this.cells.filter(\n      cell => cell.state === ResolvingCellState.RESOLVING,\n    ).length;\n  }\n\n  takeAction(action: Action) {\n    console.log(actionToString(action));\n    const cell = this.getCellByCoord(action.coordinate);\n    switch (action.type) {\n      case ActionType.REMOVE_DRAFT_NUMBER:\n        // console.log(`before ${cell.possibleValues.toString()}`)\n        cell.removeDraftNumber(action.value);\n        // console.log(`after ${cell.possibleValues.toString()}`)\n        break;\n      case ActionType.FILL_IN_NUMBER:\n        cell.fillNumber(action.value);\n        break;\n    }\n  }\n\n  takeActions(actions: Array<Action>) {\n    for (const action of actions) {\n      this.takeAction(action);\n    }\n  }\n}\n\nenum ActionType {\n  REMOVE_DRAFT_NUMBER = 'remove draft number',\n  FILL_IN_NUMBER = 'fill in number',\n}\n\ninterface Action {\n  readonly coordinate: types.Coordinates;\n  readonly type: ActionType;\n  readonly value: number;\n  readonly reasonString: string | null;\n}\n\nfunction actionToString(a: Action): string {\n  return `${a.coordinate.toString()}: ${a.type} value ${a.value}, reason: ${a.reasonString}`;\n}\n\ninterface PartialResolver {\n  resolve(board: ResolvingBoard): Array<Action>;\n}\n\nexport function eliminatePossibleStates(board: ResolvingBoard): Array<Action> {\n  const ret = new Array<Action>();\n  const addAction = function (\n    targetCell: ResolvingCell,\n    value: number,\n    sourceCell: ResolvingCell,\n  ) {\n    if (\n      targetCell.state === ResolvingCellState.RESOLVING &&\n      targetCell.draftNumbers.has(value)\n    ) {\n      ret.push({\n        coordinate: targetCell.coordinate,\n        type: ActionType.REMOVE_DRAFT_NUMBER,\n        value: value,\n        reasonString: `Conflict with ${sourceCell.toString()}`,\n      });\n    }\n  };\n  for (let i = 0; i < CELLS_NUMBER; i++) {\n    const coord = types.Coordinates.fromLinearIndex(i);\n    const cell = board.cells[i];\n    if (cell.state === ResolvingCellState.RESOLVING) {\n      continue;\n    }\n    if (cell.value === null) {\n      throw new Error('Invalid state');\n    }\n    const valueToRemove = cell.value;\n    for (const targetCell of board.getCellsByColumn(coord.x)) {\n      addAction(targetCell, valueToRemove, cell);\n    }\n    for (const targetCell of board.getCellsByRow(coord.y)) {\n      addAction(targetCell, valueToRemove, cell);\n    }\n    for (const targetCell of board.getCellsBySquare(coord.squareIndex)) {\n      addAction(targetCell, valueToRemove, cell);\n    }\n  }\n  return ret;\n}\n\nfunction uniqueValueSetter(board: ResolvingBoard): Array<Action> {\n  const ret = new Array<Action>();\n  const addAction = function (cell: ResolvingCell, value: number) {\n    ret.push({\n      coordinate: cell.coordinate,\n      type: ActionType.FILL_IN_NUMBER,\n      value: value,\n      reasonString: null,\n    });\n  };\n\n  for (let i = 0; i < CELLS_NUMBER; i++) {\n    const cell = board.cells[i];\n    if (cell.state !== ResolvingCellState.RESOLVING) {\n      continue;\n    }\n    const value = cell.draftNumbers.getUnique();\n    if (value !== null) {\n      addAction(cell, value);\n    }\n  }\n\n  return ret;\n}\n\nexport function resolve(board: types.Board) {\n  const resolvingBoard = ResolvingBoard.createFromBoard(board);\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const resolvers: Array<PartialResolver> = [\n      {resolve: eliminatePossibleStates},\n      {resolve: uniqueValueSetter},\n    ];\n\n    const before = resolvingBoard.getEmptyCellsCount();\n    for (const resolver of resolvers) {\n      const actions = resolver.resolve(resolvingBoard);\n      console.log(actions.length);\n      resolvingBoard.takeActions(actions);\n    }\n    const after = resolvingBoard.getEmptyCellsCount();\n\n    console.log(resolvingBoard.printBoard());\n    if (before === after) {\n      break;\n    }\n  }\n\n  // console.log(resolvingBoard.printBoard());\n  // for (const cell of resolvingBoard.cells){\n  // console.log(cell.possibleValues.toString());}\n}\n"],"names":["$fb6cc04260f9a749$var$wasm","ResolvingCellState","MoveDirection","ActionType","$c02655ebd8daba6d$export$356a9607d9b9ba07","$264de1acac9b7e95$export$cc1a246adca07dd4","$6fc50a6f48fb4eb3$var$ActionType","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","$fb6cc04260f9a749$var$addToExternrefTable0","obj","idx","__externref_table_alloc","__wbindgen_export_2","set","$fb6cc04260f9a749$var$handleError","f","args","apply","e","__wbindgen_exn_store","id","exports","init","module","call","err","Error","code","register","parcelRegister","Object","defineProperty","get","$18c11f3350a906ea$export$6503ec6e8aabbaf","v","enumerable","configurable","$18c11f3350a906ea$var$mapping","Map","baseUrl","manifest","i","length","path","URL","url","toString","JSON","parse","$fb6cc04260f9a749$var$cachedTextDecoder","TextDecoder","ignoreBOM","fatal","decode","$fb6cc04260f9a749$var$cachedUint8ArrayMemory0","$fb6cc04260f9a749$var$getUint8ArrayMemory0","byteLength","Uint8Array","memory","buffer","$fb6cc04260f9a749$var$getStringFromWasm0","ptr","len","subarray","$fb6cc04260f9a749$var$WASM_VECTOR_LEN","$fb6cc04260f9a749$var$cachedTextEncoder","TextEncoder","encode","$fb6cc04260f9a749$var$encodeString","encodeInto","arg","view","buf","read","written","$fb6cc04260f9a749$var$cachedDataViewMemory0","$fb6cc04260f9a749$var$getDataViewMemory0","detached","undefined","DataView","$fb6cc04260f9a749$var$passArray8ToWasm0","malloc","$fb6cc04260f9a749$export$3317e00185b5980d","board","ptr0","__wbindgen_malloc","len0","ret","fast_resolve","$fb6cc04260f9a749$var$takeFromExternrefTable0","value","__externref_table_dealloc","$fb6cc04260f9a749$var$__wbg_load","module1","imports","Response","WebAssembly","instantiateStreaming","headers","console","warn","bytes","arrayBuffer","instantiate","instance","Instance","$9098339d50778e43$exports","$fb6cc04260f9a749$var$__wbg_init","module_or_path","getPrototypeOf","prototype","$fb6cc04260f9a749$var$__wbg_get_imports","wbg","__wbg_buffer_61b7ce01341d7f88","arg0","__wbg_call_500db948e69c7330","arg1","arg2","arguments","__wbg_call_b0d8e36992d9900d","__wbg_crypto_ed58b8e10a292839","crypto","__wbg_error_7534b8e9a36f1ab4","deferred0_0","deferred0_1","error","__wbindgen_free","__wbg_getRandomValues_bcb4912f16000dc4","getRandomValues","__wbg_msCrypto_0a36e2ec3a343d26","msCrypto","__wbg_new_3ff5b33b1ce712df","__wbg_new_8a6f238a6ece86ea","__wbg_newnoargs_fd9e4bf8be2bc16d","Function","__wbg_newwithbyteoffsetandlength_ba35896968751d91","__wbg_newwithlength_34ce8f1051e74449","__wbg_node_02999533c4ea02e3","node","__wbg_now_2c95c9de01293173","now","__wbg_performance_7a3ffd0b17f663ad","performance","__wbg_process_5c1d670bc53614b8","process","__wbg_randomFillSync_ab2cfe79ebbf2740","randomFillSync","__wbg_require_79b1e9274cde3c87","require","__wbg_set_23d69db4e5c66a6e","__wbg_stack_0ed75d68575b0f3c","ptr1","$fb6cc04260f9a749$var$passStringToWasm0","realloc","mem","offset","charCodeAt","slice","stack","__wbindgen_realloc","len1","setInt32","__wbg_static_accessor_GLOBAL_0be7472e492ad3e3","$fb6cc04260f9a749$var$isLikeNone","x","__wbg_static_accessor_GLOBAL_THIS_1a6eb482d12c9bfb","__wbg_static_accessor_SELF_1dc398a895c82351","self","__wbg_static_accessor_WINDOW_ae1c80c7eea8d64a","window","__wbg_subarray_46adeb9b86949d12","__wbg_versions_c71aa1626a93e0a1","versions","__wbindgen_copy_to_typed_array","byteOffset","__wbindgen_error_new","__wbindgen_init_externref_table","table","grow","__wbindgen_is_function","__wbindgen_is_object","val","__wbindgen_is_string","__wbindgen_is_undefined","__wbindgen_memory","__wbindgen_string_new","__wbindgen_throw","Request","fetch","__wbindgen_wasm_module","__wbindgen_start","$f360512a3c30bea8$var$DEFAULT_THEME","color_prefilled","color_resolved","color_draft","color_highlight_foreground","color_highlight_bg1","$f360512a3c30bea8$var$rgba","color_highlight_bg2","color_background","hex","alpha","r","parseInt","replace","substring","g","b","$c02655ebd8daba6d$var$assertIndexInRange","desc","Number","isInteger","RangeError","$c02655ebd8daba6d$var$assertCellValueInRange","$c02655ebd8daba6d$var$CellValueSet","bitmap","constructor","initValue","Array","$c02655ebd8daba6d$export$f620cea8bc0acc40","fill","add","delete","has","clear","addAll","hasAll","getUnique","$c02655ebd8daba6d$export$d6e0f5996cc55599","y","linearIndex","squareIndex","Math","floor","fromLinearIndex","$c02655ebd8daba6d$export$f6f0c3fe4ec306ea","coordinate","toChar","fromChar","char","$c02655ebd8daba6d$export$da037351fcfc0321","cells","strict","values","cell","$c02655ebd8daba6d$export$6a0cc0ca4c9c7066","state","draftNumbers","newPrefilled","PREFILLED","newResolving","RESOLVING","hasNumber","RESOLVED","addAllDraftNumber","hasDraftNumber","addDraftNumber","removeDraftNumber","fillNumber","$c02655ebd8daba6d$export$3ca9368aae595c1d","createBoardFromString","chars","push","printBoard","getCellByCoord","coord","getCellsByRow","rowIndex","getCellsByColumn","columnIndex","getCellsBySquare","filter","getCellsByNeighborToCoord","$c02655ebd8daba6d$export$2b07a0b5dadde1bc","validate","arrays","seen","Set","merged","arr","$264de1acac9b7e95$var$drawLine","ctx","x1","y1","x2","y2","style","strokeStyle","color","lineWidth","width","beginPath","moveTo","lineTo","stroke","$264de1acac9b7e95$var$getCanvas2DContext","canvas","getContext","$264de1acac9b7e95$var$clearCanvas","clearRect","height","$264de1acac9b7e95$var$VIRTUAL_KB_HTML","$264de1acac9b7e95$var$VirtualKeyboard","cb","container","keyInputCallback","setHTMLUnsafe","keyboard","document","getElementById","keyboardDraftModeSwitch","key","createElement","classList","textContent","addEventListener","ev","preventDefault","checked","appendChild","clientWidth","clientHeight","hide","show","boardUi","w","h","getCanvasPosForIdx","config","size","left","top","display","log","animation","$264de1acac9b7e95$export$a2ef264ccbaba224","gameBoard","virtualKeyboard","gridCanvas","neighHighlightCanvas","numberHighlightCanvas","numbersCanvas","cursorCanvas","clickCanvas","cursorCoord","focusedNumber","virtualKeyboardContainer","digitInputCallback","updateConfig","getTheme","getCellSize","$264de1acac9b7e95$var$CANVAS_MARGIN","index","getIdxForCanvasPos","pos","updateBoard","redrawNumbers","redrawHighlight","firstChild","removeChild","createCanvas","redrawGrid","rect","getBoundingClientRect","clientX","clientY","updateCursor","updateFocusedNumber","redrawCursor","moveCursor","d","UP","DOWN","LEFT","RIGHT","zIndex","position","highlightCell","fillStyle","fillRect","highlightDraftCell","boxSize","cursor","highlightCursorNeighbors","highlightNumberNeighbors","highlightNumber","numberCells","c","map","startPos","endPos","sqrBorderStyle","drawNumber","small","fontSize","textAlign","textBaseline","font","fillText","$95f0dc4e46c5e870$var$HTML_CONTENT","$95f0dc4e46c5e870$export$f3f3f6c0124f08de","game","pageDom","boardDom","keyboardDom","puzzleBoard","handleVirtualKeyboardClickEvent","bind","refreshBanner","handleKeyDownEvent","$95f0dc4e46c5e870$var$keyCodeToDirection","handleDigitKeyEvent","recalculateDraftNumbers","charAt","shiftKey","draftMode","toggleDraftNumber","fillInNumber","once","timerDom","mistakesDom","remainingDom","$95f0dc4e46c5e870$var$secondsToHumanReadable","seconds","minutes","remainingSeconds","formattedMinutes","String","padStart","formattedSeconds","getElapsedSeconds","mistakes","getEmptyCellsCount","setTimeout","$6fc50a6f48fb4eb3$export$6e629d5b6a809bce","createFromBoard","takeAction","action","a","type","reasonString","REMOVE_DRAFT_NUMBER","FILL_IN_NUMBER","takeActions","actions","$ff40705a305463f8$export$985739bfa5723e08","answerBoard","startTime","endTime","answer","puzzle","alert","isAllCorrect","addAction","targetCell","sourceCell","valueToRemove","cnt","end","round","$c283b26f8307214a$var$switchPage","from","to","remove","$c283b26f8307214a$var$main","welcomePageDom","catch","init_panic_hook","body","backgroundColor","gamePageDom","puzzleArr","generate","answerArr","controller","join","replaceAll"],"version":3,"file":"index.cc854c23.js.map"}